<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>java面试黑马版 | 李阳的秘密小屋</title><meta name="keywords" content="javaweb"><meta name="author" content="李阳"><meta name="copyright" content="李阳"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="java面试黑马版"><meta name="application-name" content="java面试黑马版"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="java面试黑马版"><meta property="og:url" content="https://blog.baskly.fun/posts/45509/index.html"><meta property="og:site_name" content="李阳的秘密小屋"><meta property="og:description" content="面试考题"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://bu.dusays.com/2024/11/24/674340e151d6a.png?_r_=42d03154-2359-a243-6354-dc19b5770a41"><meta property="article:author" content="李阳"><meta property="article:tag" content="bask,李阳"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2024/11/24/674340e151d6a.png?_r_=42d03154-2359-a243-6354-dc19b5770a41"><meta name="description" content="面试考题"><link rel="shortcut icon" href="/img/flow-32x32.ico"><link rel="canonical" href="https://blog.baskly.fun/posts/45509/"><link rel="preconnect" href="//cdn.cbd.int"><meta name="google-site-verification" content="xxx"><meta name="baidu-site-verification" content="code-xxx"><meta name="msvalidate.01" content="xxx"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"><link rel="mask-icon" href="/img/siteicon/yang180.png" color="#5bbad5"><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/yang180.png"><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/yang180.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/yang32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/yang16.png"><link rel="bookmark" href="/img/siteicon/yang180.png"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={linkPageTop:void 0,peoplecanvas:void 0,postHeadAiDescription:{enable:!0,gptName:"Liyang",mode:"local",switchBtn:!1,btnLink:"https://afdian.net/item/886a79d4db6711eda42a52540025c377",randomNum:3,basicWordCount:1e3,key:"xxxx",Referer:"https://xx.xx/"},diytitle:{enable:!0,leaveTitle:"不要走",backTitle:"不要离开我     -"},LA51:void 0,greetingBox:{enable:!0,default:"晚上好👋",list:[{greeting:"晚安😴",startTime:0,endTime:5},{greeting:"早上好鸭👋, 祝你一天好心情！",startTime:6,endTime:9},{greeting:"上午好👋, 状态很好，鼓励一下～",startTime:10,endTime:10},{greeting:"11点多啦, 在坚持一下就吃饭啦～",startTime:11,endTime:11},{greeting:"午安👋, 要睡觉喽",startTime:12,endTime:14},{greeting:"🌈充实的一天辛苦啦！",startTime:14,endTime:18},{greeting:"19点喽, 奖励一顿丰盛的大餐吧🍔。",startTime:19,endTime:19},{greeting:"晚上好👋, 在属于自己的时间好好放松😌~",startTime:20,endTime:24}]},twikooEnvId:"https://twikoo.baskly.fun",commentBarrageConfig:void 0,music_page_default:"nav_music",root:"/",preloader:{source:3},friends_vue_info:void 0,navMusic:!0,mainTone:{mode:"both",api:null,cover_change:!0},authorStatus:{skills:["东隅已逝 桑榆非晚","集中精神 攻克难关"]},algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简",rightMenuMsgToTraditionalChinese:"转为繁体",rightMenuMsgToSimplifiedChinese:"转为简体"},noticeOutdate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:330},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,simplehomepage:!0,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{copy:!0,copyrightEbable:!1,limitCount:50,languages:{author:"作者: 李阳",link:"链接: ",source:"来源: 李阳的秘密小屋",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。",copySuccess:"复制成功，复制和转载请标注本文地址"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#425AEF",bgDark:"#1f1f1f",position:"top-center"},source:{justifiedGallery:{js:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js",css:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,shortcutKey:void 0,autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={configTitle:"李阳的秘密小屋",title:"java面试黑马版",postAI:"",pageFillDescription:"一 、Redis, Redis的缓存在项目中的使用？, 为什么使用Redisson分布式锁？, 3. 你能介绍一下布隆过滤器吗？, 4. 什么是缓存击穿？怎么解决, 5. 什么是缓存雪崩怎么解决？, 10. Redis的过期策略有哪些, 11. 数据淘汰策略有哪些, 20. 那你来介绍一下主从同步, 24. Redis集群脑该怎么解决呢？, 25. Redis的分片集群有什么作用, 二、MySQL, 5. B+树与B树的区别是什么？, 7. 什么是回表查询呢, 8. 知道什么是覆盖索引吗？, 9. MySQL超大分页怎么处理, 10. 索引的创建原则有哪些, 11. 什么情况下索引会失效, 17 . 并发事务带来哪些问题？, 19. undo log和redo log 的区别, 21. 主从复制的原理是什么, 23. 那你之前使用过水平分库吗？, 三、 框架篇, 2. 什么是AOP？, 3. 你们项目中有没有使用到AOP, 4. Spring的事务是如何实现的, 7. Spring中的循环引用问题, 8. 你能说一说具体流程吗, 10. SpringMVC的执行流程知道吗, 12. spring框架常见注解, 13. SpringMVC的常见注解, 14. Springboot的常见注解, 15.Spring和SpringBoot之间有什么区别？, 17.JDK动态代理和CGLIB动态代理有什么区别？, 18.拦截器和过滤器有什么区别, 20. MyBatis的执行流程是什么, 21. Mybatis是否支持延迟加载？, 22. 延迟加载的底层原理知道吗？求其上得其中求其中得其下求其下必败孙子兵法一我看你在项目中使用了你最近在哪些场景中使用了呢我在项目中使用缓存医生排班药品库存等热点数据通过分布式锁解决挂号并发问题确保号源分配的原子性操作的缓存在项目中的使用医生排班信息缓存将医生的排班表可预约时间段剩余号源数量等数据缓存到中设置合理的过期时间如小时当挂号员查询医生排班时优先从获取数据避免频繁查询数据库提升响应速度用户登录状态管理使用存储用户的和会话信息设置过期时间与保持一致当用户访问需要认证的接口时从中验证有效性实现快速的身份验证药品库存信息缓存将常用药品的库存数量价格规格等信息缓存到挂号员和医生查询药品信息时直接从缓存获取减少数据库压力患者挂号记录缓存将当天的挂号记录已预约号源等信息缓存到方便快速查询和更新挂号状态为什么使用分布式锁挂号并发问题当多个挂号员同时为同一医生同一时间段挂号时可能出现超卖问题比如某医生上午点只有个号源但个挂号员同时操作可能导致个患者都成功挂号造成号源超卖分布式锁的必要性使用分布式锁在挂号操作前先获取锁确保同一时间只有一个挂号员能操作该医生的号源操作完成后释放锁保证号源分配的原子性那么你是怎么解决缓存穿透的问题呢嗯我想一下缓存穿透是指查询一个一定不存在的数据由于存储层查不到数据因此不写入缓存这将导致这个不存在的数据每次请求都要到数据库去查询可能导致数据库挂掉这种情况大概率是遭到了攻击解决方案的话一般有两种方式方案一呢是采用缓存空数据的方式方案二就是采用布隆过滤器我们通常都会用布隆过滤器来解决它你能介绍一下布隆过滤器吗嗯是这样的布隆过滤器主要是用于检索一个元素是否在一个集合中我们当时使用的是实现的布隆过滤器它的底层原理是先初始化一个比较大的数组里面存放的是二进制或一开始都是当一个来了之后经过次计算模数组长度找到数据的下标然后把数组中原来的改为这样三个数组的位置就能标明一个的存在查找的过程也是一样的当然布隆过滤器有可能会产生一定的误判我们一般可以设置这个误判率大概不会超过其实这个误判是必然存在的要不就得增加数组的长度以内的误判率一般的项目也能接受不至于高并发下压倒数据库什么是缓存击穿怎么解决嗯缓存击穿的意思是对于设置了过期时间的缓存在某个时间点过期的时候恰好这个时间点对这个有大量的并发请求过来这些请求发现缓存过期一般都会从后端加载数据并回设到缓存这个时候大并发的请求可能会瞬间把压垮解决方案有两种方式第一可以使用互斥锁当缓存失效时不立即去先使用如的去设置一个互斥锁当操作成功返回时再进行的操作并回设缓存否则重试缓存的方法第二种方案是设置当前逻辑过期大概思路如下在设置的时候设置一个过期时间字段一块存入缓存中不给当前设置过期时间当查询的时候从取出数据后判断时间是否过期如果过期则开通另外一个线程进行数据同步当前线程正常返回数据这个数据可能不是最新的两种方案各有利弊如果选择数据的强一致性建议使用分布式锁的方案但性能上可能没那么高且有可能产生死锁的问题如果选择的逻辑删除则优先考虑高可用性性能比较高但数据同步这块做不到强一致什么是缓存雪崩怎么解决嗯缓存雪崩意思是设置缓存时采用了相同的过期时间导致缓存在某一时刻同时失效请求全部转发到瞬时压力过重而雪崩与缓存击穿的区别是雪崩是很多而击穿是某一个缓存解决方案主要是可以将缓存失效时间分散开比如可以在原有的失效时间基础上增加一个随机值比如分钟随机这样每一个缓存的过期时间的重复率就会降低就很难引发集体失效的事件作为缓存与数据如何进行同步呢双写一致我们当时是将医生排班信息用户的一些信息缓存到数据库这些数据实时要求性并没有这么高所以我们当时采用的是异步的方案同步数据我们当时采用的阿里的组件实现数据同步不需要更改业务代码部署一个服务服务把自己伪装成的一个从节点当数据更新以后会读取数据然后在通过的客户端获取到数据更新缓存即可作为缓存数据持久化是怎么做的在中提供了两种数据持久化的方式这两种持久化方式有什么区别呢是一个快照文件它是把内存存储的数据写到磁盘上当实例宕机恢复数据的时候可以从的快照文件中恢复数据的含义是追加文件当执行写命令的时候都会存储到这个文件中当实例宕机恢复数据的时候会从这个文件中再次执行一遍命令来恢复数据这两种方式哪种恢复的比较快呢因为是二进制文件保存时体积也比较小所以它恢复得比较快但它有可能会丢数据我们通常在项目中也会使用来恢复数据虽然恢复的速度慢一些但它丢数据的风险要小很多在文件中可以设置刷盘策略我们当时设置的就是每秒批量写入一次命令的过期策略有哪些嗯在中提供了两种数据过期删除策略第一种是惰性删除在设置该过期时间后我们不去管它当需要该时我们检查其是否过期如果过期我们就删掉它反之返回该第二种是定期删除就是说每隔一段时间我们就对一些进行检查并删除里面过期的定期清理的两种模式是模式是定时任务执行频率默认为每次不超过可以通过修改配置文件的选项来调整这个次数模式执行频率不固定每次事件循环会尝试执行但两次间隔不低于每次耗时不超过的过期删除策略是惰性删除定期删除两种策略配合使用数据淘汰策略有哪些嗯这个在中提供了很多种默认是不删除任何数据内部不足时直接报错这个可以在的配置文件中进行设置里面有两个非常重要的概念一个是另外一个是的意思就是最少最近使用它会用当前时间减去最后一次访问时间这个值越大则淘汰优先级越高的意思是最少频率使用它会统计每个的访问频率值越小淘汰优先级越高我们在项目中设置的是它会挑选最近最少使用的数据进行淘汰把一些经常访问的留在中数据库有万数据只能缓存数据如何保证中的数据都是热点数据嗯我想一下可以使用挑选最近最少使用的数据淘汰淘汰策略那留下来的都是经常访问的热点数据的内存用完了会发生什么嗯这个要看的数据淘汰策略是什么如果是默认的配置内存用完以后则直接报错我们当时设置的是策略把最近最常访问的数据留在缓存中的分布式锁是如何实现的呢我们当时使用的是来实现分布式锁在挂号业务中当多个挂号员同时为同一医生同一时间段挂号时可能会出现号源超卖的问题底层使用的是和脚本来保证原子性实现分布式锁如何合理控制锁的时长嗯的确的指令不好控制这个问题我们当时采用的是的一个框架实现的在中需要手动加锁并且可以控制锁的失效时间和等待时间当锁住的一个业务还没有执行完成的时候会引入一个看门狗机制就是说每隔一段时间就检查当前业务是否还持有锁如果持有就增加加锁的持有时间当业务执行完成之后需要使用释放锁就可以了还有一个好处就是在高并发下一个业务有可能会执行很快客户持有锁的时候客户来了以后并不会马上被拒绝它会自旋不断尝试获取锁如果客户释放之后客户就可以马上持有锁性能也得到了提升实现分布式锁是可重用的吗嗯是可以重入的这样做是为了避免死锁的产生这个重入其实在内部就是判断是否是当前线程持有的锁如果是当前线程持有的锁就会计数如果释放锁就会在计数上减一在存储数据的时候采用的结构大可以按照自己的业务进行定制其中小是当前线程的唯一标识是当前线程重入的次数可以解决主从一致的问题吗这个是不能的比如当线程加锁成功后节点数据会异步复制到节点此时如果当前持有锁的节点宕机节点被提升为新的节点假如现在来了一个线程再次加锁会在新的节点上加锁成功这个时候就会出现两个节点同时持有一把锁的问题我们可以利用提供的红锁来解决这个问题它的主要作用是不能只在一个实例上创建锁应该是在多个实例上创建锁并且要求在大多数节点上都成功创建锁红锁中要求是的节点数量要过半这样就能避免线程加锁成功后节点宕机导致线程成功加锁到新的节点上的问题了但是如果使用了红锁因为需要同时在多个节点上都添加锁性能就变得非常低并且运维维护成本也非常高所以我们一般在项目中也不会直接使用红锁并且官方也暂时废弃了这个红锁如果业务非要保证数据的强一致性这个该怎么解决呢嗯本身就是支持高可用的要做到强一致性就非常影响性能所以如果有强一致性要求高的业务建议使用实现的分布式锁它是可以保证强一致性的集群有哪些方案知道吗嗯在中提供的集群方案总共有三种主从复制哨兵模式分片集群那你来介绍一下主从同步嗯是这样的单节点的并发能力是有上限的要进一步提高的并发能力可以搭建主从集群实现读写分离一般都是一主多从主节点负责写数据从节点负责读数据主节点写入数据之后需要把数据同步到从节点中能说一下主从同步数据的流程吗嗯好主从同步分为了两个阶段一个是全量同步一个是增量同步全量同步是指从节点第一次与主节点建立连接的时候使用全量同步流程是这样的第一从节点请求主节点同步数据其中从节点会携带自己的和偏移量第二主节点判断是否是第一次请求主要判断的依据就是主节点与从节点是否是同一个如果不是就说明是第一次同步那主节点就会把自己的和发送给从节点让从节点与主节点的信息保持一致第三在同时主节点会执行生成文件后发送给从节点去执行从节点先把自己的数据清空然后执行主节点发送过来的文件这样就保持了一致当然如果在生成执行期间依然有请求到了主节点而主节点会以命令的方式记录到缓冲区缓冲区是一个日志文件最后把这个日志文件发送给从节点这样就能保证主节点与从节点完全一致了后期再同步数据的时候都是依赖于这个日志文件这个就是全量同步增量同步指的是当从节点服务重启之后数据就不一致了所以这个时候从节点会请求主节点同步数据主节点还是判断不是第一次请求不是第一次就获取从节点的值然后主节点从命令日志中获取值之后的数据发送给从节点进行数据同步怎么保证的高并发高可用首先可以搭建主从集群再加上使用中的哨兵模式哨兵模式可以实现主从集群的自动故障恢复里面就包含了对主从服务的监控自动故障恢复通知如果故障会将一个提升为当故障实例恢复后也以新的为主同时也充当客户端的服务发现来源当集群发生故障转移时会将最新信息推送给的客户端所以一般项目都会采用哨兵的模式来保证的高并发高可用你们使用是单点还是集群哪种集群嗯我们当时使用的是主从主从加哨兵一般单节点不超过内存如果内存不足则可以给不同服务分配独立的主从节点尽量不做分片集群因为集群维护起来比较麻烦并且集群之间的心跳检测和数据通信会消耗大量的网络带宽也没有办法使用脚本和事务集群脑该怎么解决呢嗯这个在项目中很少见不过脑裂的问题是这样的我们现在用的是的哨兵模式集群的有的时候由于网络等原因可能会出现脑裂的情况就是说由于节点和节点和处于不同的网络分区使得没有能够心跳感知到所以通过选举的方式提升了一个为这样就存在了两个就像大脑分裂了一样这样会导致客户端还在那里写入数据新节点无法同步数据当网络恢复后会将降为这时再从新同步数据这会导致中的大量数据丢失关于解决的话我记得在的配置中可以设置第一可以设置最少的节点个数比如设置至少要有一个从节点才能同步数据第二个可以设置主从数据复制和同步的延迟时间达不到要求就拒绝请求就可以避免大量的数据丢失的分片集群有什么作用分片集群主要解决的是海量数据存储的问题集群中有多个每个保存不同数据并且还可以给每个设置多个节点就可以继续增大集群的高并发能力同时每个之间通过监测彼此健康状态就类似于哨兵模式了当客户端请求可以访问集群任意节点最终都会被转发到正确节点分片集群中数据是怎么存储和读取的嗯在集群中是这样的集群引入了哈希槽的概念有个哈希槽集群中每个主节点绑定了一定范围的哈希槽范围通过校验后对取模来决定放置哪个槽通过槽找到对应的节点进行存储取值的逻辑是一样的是单线程的但是为什么还那么快嗯这个有几个原因吧完全基于内存的语言编写采用单线程避免不必要的上下文切换和竞争条件使用多路复用模型非阻塞例如和都是在后台执行操作不影响主线程的正常使用不会产生阻塞能解释一下多路复用模型简历还我嗯多路复用是指利用单个线程来同时监听多个并且在某个可读可写时得到通知从而避免无效的等待充分利用资源目前的多路复用都是采用的模式实现它会在通知用户进程就绪的同时把已就绪的写入用户空间不需要挨个遍历来判断是否就绪提升了性能其中的网络模型就是使用多路复用结合事件的处理器来应对多个请求比如提供了连接应答处理器命令回复处理器命令请求处理器在之后为了提升更好的性能在命令回复处理器使用了多线程来处理回复事件在命令请求处理器中将命令的转换使用了多线程增加命令转换速度在命令执行的时候依然是单线程二在中如何定位慢查询呢嗯我们当时在做压力测试时发现有些接口响应时间非常慢压测的结果大概是秒钟我们在中开启了慢日志查询设置的值就是秒一但的执行时间超过秒就会记录到日志中那这个语句执行很慢如何分析呢如果一条执行很慢我们通常会使用的命令来分析这条的执行情况通过和可以检查是否命中了索引如果已经添加了索引也可以判断索引是否有效通过字段可以查看是否有优化空间比如是否存在全索引扫描或全表扫描通过建议可以判断是否出现回表情况如果出现可以尝试添加索引或修改返回字段来优化那你了解过索引吗什么是索引嗯索引在项目中非常常见它是一种帮助高效获取数据的数据结构主要用来提高数据检索效率降低数据库的成本同时索引列可以对数据进行排序降低数据排序的成本也能减少的消耗索引的底层数据结构了解过吗的默认存储引擎使用的是树作为索引的存储结构选择树的原因包括节点可以有更多子节点路径更短磁盘读写代价更低非叶子节点只存储键值和指针叶子节点存储数据树适合范围查询和扫描因为叶子节点形成了一个双向链表树与树的区别是什么树的非叶子节点和叶子节点都存放数据而树的所有数据只出现在叶子节点这使得树在查询时效率更稳定树在进行范围查询时效率更高因为所有数据都在叶子节点并且叶子节点之间形成了双向链表什么是聚簇索引什么是非聚簇索引好的聚簇索引是指数据与索引放在一起树的叶子节点保存了整行数据通常只有一个聚簇索引一般是由主键构成非聚簇索引则是数据与索引分开存储树的叶子节点保存的是主键值可以有多个非聚簇索引通常我们自定义的索引都是非聚簇索引什么是回表查询呢嗯其实跟刚才介绍的聚簇索引和非聚簇索引是有关系的回表的意思就是通过二级索引找到对应的主键值然后再通过主键值找到聚集索引中所对应的整行数据这个过程就是回表备注如果面试官直接问回表则需要先介绍聚簇索引和非聚簇索引知道什么是覆盖索引吗嗯清楚的覆盖索引是指查询语句使用了索引在返回的列必须在索引中全部能够找到如果我们使用查询它会直接走聚集索引查询一次索引扫描直接返回数据性能高如果按照二级索引查询数据的时候返回的列中没有创建索引有可能会触发回表查询尽量避免使用尽量在返回的列中都包含添加索引的字段超大分页怎么处理嗯超大分页通常发生在数据量大的情况下使用分页查询且需要排序时效率较低可以通过覆盖索引和子查询来解决首先查询数据的字段进行分页然后根据列表用子查询来过滤只查询这些的数据因为查询时使用的是覆盖索引所以效率可以提升索引的创建原则有哪些嗯这个情况有很多不过都有一个大前提就是表中的数据要超过万以上我们才会创建索引并且添加索引的字段是查询比较频繁的字段一般也是像作为查询条件排序字段或分组的字段这些还有就是我们通常创建索引的时候都是使用复合索引来创建一条的返回值尽量使用覆盖索引如果字段的区分度不高的话我们也会把它放在组合索引后面的字段如果某一个字段的内容较长我们会考虑使用前缀索引来使用当然并不是所有的字段都要添加索引这个索引的数量也要控制因为添加索引也会导致新增改的速度变慢什么情况下索引会失效嗯这个情况比较多我说一些自己的经验以前遇到过的比如索引在使用的时候没有遵循最左匹配法则第二个是模糊查询如果号在前面也会导致索引失效如果在添加索引的字段上进行了运算操作或者类型转换也都会导致索引失效我们之前还遇到过一个就是如果使用了复合索引中间使用了范围查询右边的条件索引也会失效所以通常情况下想要判断出这条是否有索引失效的情况可以使用执行计划来分析谈一谈你对优化的经验面试常见候选人嗯这个在项目还是挺常见的当然如果直说优化的话我们会从这几方面考虑比如建表的时候使用索引语句的编写主从复制读写分离还有一个是如果量比较大的话可以考虑分库分表创建表的时候你们是如何优化的呢创建表时我们主要参考阿里云的开发手册选择字段类型时结合字段内容比如如果是数值的话像这些类型要根据实际情况选择如果是字符串类型也是结合存储的内容来选择和或者类型在使用索引的时候是如何优化呢在使用索引时我们遵循索引创建原则确保索引字段是查询频繁的使用复合索引覆盖返回值避免在索引字段上进行运算或类型转换以及控制索引数量你平时对语句做了哪些优化呢嗯这个也有很多比如语句务必指明字段名称不要直接使用还有就是要注意语句避免造成索引失效的写法如果是聚合查询尽量使用代替表关联时优先使用以及在必须使用或时确保小表作为驱动表事务的特征是什么可以详细说一下吗事务的特性是即原子性一致性隔离性持久性例如向转账元这个操作要么都成功要么都失败体现了原子性转账过程中数据要保持一致扣除了元必须增加元隔离性体现在向转账时不受其他事务干扰持久性体现在事务提交后数据要被持久化存储并发事务带来哪些问题并发事务可能导致脏读不可重复读和幻读脏读是指一个事务读到了另一个事务未提交的脏数据不可重复读是指在一个事务内多次读取同一数据由于其他事务的修改导致数据不一致幻读是指一个事务读取到了其他事务插入的幻行怎么解决这些问题呢的默认隔离级别是支持四种隔离级别分别有第一个是未提交读它解决不了刚才提出的所有问题一般项目中也不用这个第二个是读已提交它能解决脏读的问题的但是解决不了不可重复读和幻读第三个是可重复读它能解决脏读和不可重复读但是解决不了幻读这个也是默认的隔离级别第四个是串行化它可以解决刚才提出来的所有问题但是由于让是事务串行执行的性能比较低所以我们一般使用的都是默认的隔离级别可重复读和的区别好的其中日志记录的是数据页的物理变化服务宕机可用来同步数据而不同它主要记录的是逻辑日志当事务回滚时通过逆操作恢复原来的数据比如我们删除一条数据的时候就会在日志文件中新增一条语句如果发生回滚就执行逆操作保证了事务的持久性保证了事务的原子性和一致性事务中的隔离性是如何保障的呢请你解释一下面试常考事务的隔离性是由锁和实现的其中的意思是多版本并发控制指维护一个数据的多个版本使得读写操作没有冲突它的底层实现主要是分为了三个部分第一个是隐藏字段第二个是日志第三个是读视图隐藏字段是指在中给每个表都设置了隐藏字段有一个是事务记录每一次操作的事务是自增的另一个字段是回滚指针指向上一个版本的事务版本记录地址主要的作用是记录回滚日志存储老版本数据在内部会形成一个版本链在多个事务并行操作某一行记录记录不同事务修改数据的版本通过指针形成一个链表解决的是一个事务查询选择版本的问题在内部定义了一些匹配规则和当前的一些事务判断该访问那个版本的数据不同的隔离级别快照读是不一样的最终的访问的结果不一样如果是隔离级别每一次执行快照读时生成如果是隔离级别仅在事务中第一次执行快照读时生成后续复用简洁版事务的隔离性通过锁和多版本并发控制来保证通过维护数据的多个版本来避免读写冲突底层实现包括隐藏字段和隐藏字段包括和记录了不同版本的数据通过形成版本链定义了不同隔离级别下的快照读决定了事务访问哪个版本的数据主从复制的原理是什么主从复制的核心是二进制日志步骤如下主库在事务提交时记录数据变更到从库读取主库的并写入中继日志从库重做中继日志中的事件反映到自己的数据中你们项目用过的分库分表吗我们采用微服务架构每个微服务对应一个数据库是根据业务进行拆分的这个其实就是垂直拆分那你之前使用过水平分库吗使用过当时业务发展迅速某个表数据量超过万单库优化后性能仍然很慢因此采用了水平分库我们首先部署了台服务器和个数据库使用进行数据分片旧数据也按照取模规则迁移到了各个数据库中这样各个数据库可以分摊存储和读取压力解决了性能问题三框架篇框架中的单例是线程安全的吗不是线程安全的当多用户同时请求一个服务时容器会给每个请求分配一个线程这些线程会并发执行业务逻辑如果处理逻辑中包含对单例状态的修改比如修改单例的成员属性就必须考虑线程同步问题框架本身并不对单例进行线程安全封装线程安全和并发问题需要开发者自行处理通常在项目中使用的是不可变状态如类和类因此在某种程度上可以说的单例是线程安全的如果有多种状态如对象就需要自行保证线程安全最简单的解决办法是将单例的作用域由变更为什么是即面向切面编程在中用于将那些与业务无关但对多个对象产生影响的公共行为和逻辑抽取出来实现公共模块复用降低耦合常见的应用场景包括公共日志保存和事务处理你们项目中有没有使用到我们之前在后台管理系统中使用来记录系统操作日志主要思路是使用的环绕通知和切点表达式找到需要记录日志的方法然后通过环绕通知的参数获取请求方法的参数例如类信息方法信息注解请求方式等并将这些参数保存到数据库的事务是如何实现的实现事务的本质是利用完成的它对方法前后进行拦截在执行方法前开启事务在执行完目标方法后根据执行情况提交或回滚事务的事务失效的场景有哪些在项目中我遇到过几种导致事务失效的场景有一次我们在方法内部捕获并处理了异常没有将异常抛出会导致事务失效因此处理异常后应该确保异常能够被抛出如果方法抛出检查型异常并且没有在注解上配置属性为那么异常发生时事务可能不会回滚如果事务注解的方法不是公开修饰的也可能导致事务失效的的生命周期易考中的生命周期包括以下步骤通过获取的定义信息调用构造函数实例化进行的依赖注入例如通过方法或注解处理实现了接口的通过接口可以获取到的一些基本信息比如的名称的工厂和执行的前置处理器调用初始化方法如实现了接口或自定义的执行的后置处理器可能在这里产生代理对象最后是销毁中的循环引用问题循环依赖发生在两个或两个以上的互相持有对方形成闭环框架允许循环依赖存在并通过三级缓存解决大部分循环依赖问题一级缓存单例池缓存已完成初始化的对象二级缓存缓存尚未完成生命周期的早期对象三级缓存缓存用于创建对象你能说一说具体流程吗解决循环依赖的流程如下实例化对象并创建存入三级缓存在初始化时需要对象开始的创建逻辑实例化完成也创建存入三级缓存需要注入通过三级缓存获取生成对象存入二级缓存通过二级缓存获得对象后创建成功存入一级缓存对象初始化时由于已创建完成可以直接注入创建成功存入一级缓存清除二级缓存中的临时对象构造方法出现了循环依赖怎么解决由于构造函数是生命周期中最先执行的框架无法解决构造方法的循环依赖问题可以使用懒加载注解延迟的创建直到实际需要时的执行流程知道吗的执行流程包括以下步骤用户发送请求到前端控制器调用找到具体处理器返回处理器对象及拦截器如果有给调用处理器适配器适配并调用具体处理器在方法上添加了注解通过来返回结果转换为并且响应的自动装配原理易考的自动配置原理基于注解它封装了和是核心它通过导入配置选择器读取文件中的类名根据条件注解决定是否将配置类中的导入到容器中框架常见注解的常见注解包括声明的注解依赖注入相关注解设置作用域的注解配置相关注解相关注解的常见注解的常见注解有映射请求路径接收请求的数据指定请求参数名称从请求路径中获取参数将方法返回的对象转化为获取请求头数据等的常见注解的常见注解包括由和组成其他注解如等用于简化的配置和之间有什么区别和的区别在于它们的目标和用途不同是一个轻量级的开源框架它提供了一种简单的方式来构建企业级应用程序则是框架的延伸和扩展它提供了一种快速构建应用程序的方式开发人员可以通过使用来快速集成常用的第三方库和框架使得开发人员可以快速构建出一个可运行的应用程序请你描述一下的和和都是框架中的核心概念它们的区别在于控制反转它是一种思想主要解决程序设计中的对象依赖关系管理问题在思想中对象的创建权反转给第三方容器由容器进行对象的创建及依赖关系的管理依赖注入它是思想的具体实现方式之一用于实现在中依赖注入是指在对象创建时由容器自动将依赖对象注入到需要依赖的对象中简单来说它们的关系是是一种思想理念定义了对象创建和依赖关系处理的方式是思想的具体实现方式之一实际提供对象依赖关系的注入功能例如在框架中体现为容器承担了对象创建及依赖关系管理的控制权体现为容器通过构造方法注入方法注入等方式将依赖对象注入到需要依赖的对象中动态代理和动态代理有什么区别动态代理和动态代理都是常见的动态代理实现技术但它们有以下区别动态代理基于接口要求目标对象实现接口动态代理基于类可以代理没有实现接口的目标对象动态代理使用和来生成代理对象动态代理使用库来生成代理对象动态代理生成的代理对象是目标对象的接口实现动态代理生成的代理对象是目标对象的子类动态代理性能相对较高生成代理对象速度较快动态代理性能相对较低生成代理对象速度较慢动态代理无法代理类和方法动态代理可以代理任意类拦截器和过滤器有什么区别拦截器和过滤器的区别主要体现在以下点出身不同过滤器来自于而拦截器来自于框架触发时机不同请求的执行顺序是请求进入容器进入过滤器进入进入拦截器执行控制器所以过滤器和拦截器的执行时机是过滤器会先执行然后才会执行拦截器最后才会进入真正的要调用的方法底层实现不同过滤器是基于方法回调实现的拦截器是基于动态代理底层是反射实现的支持的项目类型不同过滤器是规范中定义的所以过滤器要依赖容器它只能用在项目中而拦截器是中的一个组件因此拦截器既可以用在项目中同时还可以用在或程序中使用的场景不同因为拦截器更接近业务系统所以拦截器主要用来实现项目中的业务判断的比如登录判断权限判断日志记录等业务而过滤器通常是用来实现通用功能过滤的比如敏感词过滤字符集编码设置响应数据压缩等功能和有什么不同和都是用来实现依赖注入的注解在项目中但二者却有着点不同来源不同来自框架而来自于依赖查找的顺序不同先根据类型再根据名称查询而先根据名称再根据类型查询支持的参数不同只支持设置个参数而支持设置个参数依赖注入的用法支持不同既支持构造方法注入又支持属性注入和注入而只支持属性注入和注入编译器的提示不同当注入对象时使用注解编译器会提示错误而使用注解则不会提示错误的执行流程是什么的执行流程如下读取配置文件构造会话工厂会话工厂创建对象操作数据库的接口执行器执行方法中的参数输入参数映射输出结果映射是否支持延迟加载支持延迟加载即在需要用到数据时才加载可以通过配置文件中的配置启用或禁用延迟加载延迟加载的底层原理知道吗延迟加载的底层原理主要使用动态代理实现使用创建目标对象的代理对象调用目标方法时如果发现是值则执行查询获取数据后设置属性值并继续查询目标方法的一级二级缓存用过吗的一级缓存是基于的本地缓存作用域为默认开启二级缓存需要单独开启作用域为或默认也是采用存储",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-09-18 15:14:23",postMainColor:""}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:(e,t,a)=>{if(0===a)return;const o={value:t,expiry:Date.now()+864e5*a};localStorage.setItem(e,JSON.stringify(o))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const a=JSON.parse(t);if(!(Date.now()>a.expiry))return a.value;localStorage.removeItem(e)}},e.getScript=(e,t={})=>new Promise(((a,o)=>{const c=document.createElement("script");c.src=e,c.async=!0,c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},Object.keys(t).forEach((e=>{c.setAttribute(e,t[e])})),document.head.appendChild(c)})),e.getCSS=(e,t=!1)=>new Promise(((a,o)=>{const c=document.createElement("link");c.rel="stylesheet",c.href=e,t&&(c.id=t),c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},document.head.appendChild(c)})),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#18171d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#f7f9fe")};const t=saveToLocal.get("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches,o=window.matchMedia("(prefers-color-scheme: light)").matches,c=window.matchMedia("(prefers-color-scheme: no-preference)").matches,n=!a&&!o&&!c;if(void 0===t){if(o)activateLightMode();else if(a)activateDarkMode();else if(c||n){const e=(new Date).getHours();e<=6||e>=18?activateDarkMode():activateLightMode()}window.matchMedia("(prefers-color-scheme: dark)").addListener((e=>{void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode():activateLightMode())}))}else"light"===t?activateLightMode():activateDarkMode();const d=saveToLocal.get("aside-status");void 0!==d&&("hide"===d?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="https://jsd-proxy.ygxz.in/npm/js-heo@1.0.11/poem/poem.min.css"><link rel="stylesheet" href="https://jsd-proxy.ygxz.in/npm/js-heo@1.0.11/mainColor/heoMainColor.min.css"><link rel="stylesheet" href="https://jsd-proxy.ygxz.in/gh/lyay23/blogstatic@v1.0.0/static/essay-style.min.css"><link rel="stylesheet" href="https://jsd-proxy.ygxz.in/gh/lyay23/blogstatic@v1.0.0/static/todolist.min.css"><link rel="stylesheet" href="https://jsd-proxy.ygxz.in/gh/lyay23/blogstatic@v1.0.1/static/custom-me.min.css"><link rel="stylesheet" href="https://jsd-proxy.ygxz.in/gh/lyay23/blogstatic@v1.0.0/static/imgloaded.min.css"><link rel="stylesheet" href="https://jsd-proxy.ygxz.in/gh/lyay23/blogstatic@v1.0.0/static/twikoo.min.css"><script async defer src="https://umami.baskly.fun/script.js" data-website-id="83445f1f-eab2-4423-b52a-d98fcec8638f"></script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://bu.dusays.com/2025/03/01/67c2609b7c10b.jpg"><div class="loading-image-dot"></div></div></div><script>const preloader={endLoading:()=>{document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",(()=>{preloader.endLoading()})),setTimeout((function(){preloader.endLoading()}),1e4),document.addEventListener("pjax:send",(()=>{preloader.initLoading()})),document.addEventListener("pjax:complete",(()=>{preloader.endLoading()}))</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"><script async src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">李阳的秘密小屋</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i> <span>隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i> <span>分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i> <span>标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tongji1"></use></svg> <span>统计</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=12781955100&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i> <span>耳机分你一半</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i> <span>留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/todolist/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zuji"></use></svg> <span>脚步</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/essay/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-taiyang"></use></svg> <span>小太阳</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-a-xiaoyangyang_huaban1"></use></svg> <span>了解我</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i> <span>搜索</span></a></div><input id="center-console" type="checkbox"><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole()"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://bu.dusays.com/2025/05/30/68398ca86a127.gif&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://bu.dusays.com/2025/05/30/68398ca86a127.gif&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title">最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/408/" style="font-size:1.05rem">408<sup>1</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size:1.05rem">C语言<sup>1</sup></a><a href="/tags/java/" style="font-size:1.05rem">java<sup>1</sup></a><a href="/tags/javaweb/" style="font-size:1.05rem">javaweb<sup>9</sup></a><a href="/tags/%E5%8A%9B%E6%89%A3%E5%88%B7%E9%A2%98/" style="font-size:1.05rem">力扣刷题<sup>1</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size:1.05rem">操作系统<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size:1.05rem">数据结构<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" style="font-size:1.05rem">计算机组成原理<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size:1.05rem">计算机网络<sup>2</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/" style="font-size:1.05rem">软件工程<sup>1</sup></a></div></div><hr></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多"><i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/" itemprop="url">java</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/javaweb/" tabindex="-1" itemprop="url"><span><i class="anzhiyufont anzhiyu-icon-hashtag"></i> javaweb</span></a></span></div></div><h1 class="post-title" itemprop="name headline">java面试黑马版</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-09-07T02:34:21.000Z" title="发表于 2025-09-07 10:34:21">2025-09-07</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-09-18T07:14:23.542Z" title="更新于 2025-09-18 15:14:23">2025-09-18</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">11.5k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>35分钟</span></span><span class="post-meta-separator"></span><span data-flag-title="java面试黑马版"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="twikoo_visitors" title="访问量"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator"></span><span class="post-meta-position" title="作者IP属地为武汉"><i class="anzhiyufont anzhiyu-icon-location-dot"></i> 武汉</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/45509/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://bu.dusays.com/2024/11/24/674340e151d6a.png?_r_=42d03154-2359-a243-6354-dc19b5770a41"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://blog.baskly.fun/posts/45509/"><header><a class="post-meta-categories" href="/categories/java/" itemprop="url">java</a><a href="/tags/javaweb/" tabindex="-1" itemprop="url">javaweb</a><h1 id="CrawlerTitle" itemprop="name headline">java面试黑马版</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">李阳</span><time itemprop="dateCreated datePublished" datetime="2025-09-07T02:34:21.000Z" title="发表于 2025-09-07 10:34:21">2025-09-07</time><time itemprop="dateCreated datePublished" datetime="2025-09-18T07:14:23.542Z" title="更新于 2025-09-18 15:14:23">2025-09-18</time></header><blockquote><p>求其上,得其中;求其中,得其下,求其下,必败</p><p><em>——《孙子兵法》</em></p></blockquote><h4 id="一-redis">一 、Redis</h4><h5 id="1-我看你在项目中使用了redis你最近在哪些场景中使用了redis呢">1. 我看你在项目中使用了Redis，你最近在哪些场景中使用了Redis呢？</h5><p>我在项目中使用Redis缓存医生排班、药品库存等热点数据，通过Redisson分布式锁解决挂号并发问题，确保号源分配的原子性操作。</p><h6 id="redis的缓存在项目中的使用">Redis的缓存在项目中的使用？</h6><ol type="1"><li><p>医生排班信息缓存</p><p>将医生的排班表、可预约时间段、剩余号源数量等数据缓存到Redis中，设置合理的过期时间（如1小时）。当挂号员查询医生排班时，优先从Redis获取数据，避免频繁查询数据库，提升响应速度。</p></li><li><p>用户登录状态管理</p><p>使用Redis存储用户的JWT Token和会话信息，设置Token过期时间与JWT保持一致。当用户访问需要认证的接口时，从Redis中验证Token有效性，实现快速的身份验证。</p></li><li><p>药品库存信息缓存</p><p>将常用药品的库存数量、价格、规格等信息缓存到Redis，挂号员和医生查询药品信息时直接从缓存获取，减少数据库压力。</p></li><li><p>患者挂号记录缓存</p><p>将当天的挂号记录、已预约号源等信息缓存到Redis，方便快速查询和更新挂号状态。</p></li></ol><h6 id="为什么使用redisson分布式锁">为什么使用Redisson分布式锁？</h6><ol type="1"><li><p>挂号并发问题</p><p>当多个挂号员同时为同一医生同一时间段挂号时，可能出现超卖问题。比如某医生上午10点只有5个号源，但6个挂号员同时操作，可能导致6个患者都成功挂号，造成号源超卖。</p></li><li><p>分布式锁的必要性</p><p>使用Redisson分布式锁，在挂号操作前先获取锁，确保同一时间只有一个挂号员能操作该医生的号源，操作完成后释放锁，保证号源分配的原子性。</p></li></ol><h5 id="2-那么你是怎么解决缓存穿透的问题呢">2. 那么你是怎么解决缓存穿透的问题呢？</h5><p>嗯，我想一下。缓存穿透是指查询一个一定不存在的数据，由于存储层查不到数据因此不写入缓存，这将导致这个不存在的数据每次请求都要到 数据库去查询，可能导致 数据库 挂掉。这种情况大概率是遭到了攻击。解决方案的话一般有两种方式方案一呢是采用缓存空数据的方式，方案二就是采用布隆过滤器，我们通常都会用布隆过滤器来解决它。</p><h5 id="3-你能介绍一下布隆过滤器吗">3. 你能介绍一下布隆过滤器吗？</h5><p>嗯，是这样的。布隆过滤器主要是用于检索一个元素是否在一个集合中。我们当时使用的是Redisson实现的布隆过滤器。它的底层原理是，先初始化一个比较大的数组，里面存放的是二进制0或1。一开始都是0，当一个key来了之后，经过3次hash计算，模数组长度找到数据的下标，然后把数组中原来的0改为1。这样，三个数组的位置就能标明一个key的存在。查找的过程也是一样的。当然，布隆过滤器有可能会产生一定的误判，我们一般可以设置这个误判率，大概不会超过5%。其实这个误判是必然存在的，要不就得增加数组的长度。5%以内的误判率一般的项目也能接受，不至于高并发下压倒数据库。</p><h5 id="4-什么是缓存击穿怎么解决">4. 什么是缓存击穿？怎么解决</h5><p>嗯！缓存击穿的意思是，对于设置了过期时间的key，缓存在某个时间点过期的时候，恰好这个时间点对这个Key有大量的并发请求过来。这些请求发现缓存过期，一般都会从后端 DB 加载数据并回设到缓存，这个时候大并发的请求可能会瞬间把 DB 压垮。</p><p>解决方案有两种方式：第一，可以使用互斥锁：当缓存失效时，不立即去load db，先使用如 Redis 的 <code>SETNX</code> 去设置一个互斥锁。当操作成功返回时，再进行 load db的操作并回设缓存，否则重试get缓存的方法。第二种方案是设置当前key逻辑过期，大概思路如下：</p><ol type="1"><li>在设置key的时候，设置一个过期时间字段一块存入缓存中，不给当前key设置过期时间；</li><li>当查询的时候，从redis取出数据后判断时间是否过期；</li><li>如果过期，则开通另外一个线程进行数据同步，当前线程正常返回数据，这个数据可能不是最新的。</li></ol><p>两种方案各有利弊：</p><p>如果选择数据的强一致性，建议使用分布式锁的方案，但性能上可能没那么高，且有可能产生死锁的问题。</p><p>如果选择key的逻辑删除，则优先考虑高可用性，性能比较高，但数据同步这块做不到强一致。</p><h5 id="5-什么是缓存雪崩怎么解决">5. 什么是缓存雪崩，怎么解决？</h5><p>嗯！缓存雪崩意思是，设置缓存时采用了相同的过期时间，导致缓存在某一时刻同时失效，请求全部转发到DB，DB瞬时压力过重而雪崩。与缓存击穿的区别是：雪崩是很多key，而击穿是某一个key缓存。解决方案主要是，可以将缓存失效时间分散开。比如，可以在原有的失效时间基础上增加一个随机值，比如1-5分钟随机。这样，每一个缓存的过期时间的重复率就会降低，就很难引发集体失效的事件。</p><h5 id="6-redis作为缓存mysql与redis数据如何进行同步呢双写一致">6. Redis作为缓存，Mysql与Redis数据如何进行同步呢（双写一致）</h5><p>我们当时是将医生排班信息，用户的一些信息缓存到数据库，这些数据实时要求性并没有这么高，所以我们当时采用的是异步的方案同步数据 我们当时采用的阿里的canal组件实现数据同步:不需要更改业务代码，部署一个canal服务。canal服务把自己伪装成mysql的一个从节点，当mysql数据更新以后，canal会读取binlog数据，然后在通过canal的客户端获取到数据，更新缓存即可。</p><h5 id="7-redis作为缓存数据持久化是怎么做的">7. Redis作为缓存，数据持久化是怎么做的</h5><p>在Redis中提供了两种数据持久化的方式：1) RDB；2) AOF。</p><h5 id="8-这两种持久化方式有什么区别呢">8. 这两种持久化方式有什么区别呢？</h5><p>RDB是一个快照文件。它是把redis内存存储的数据写到磁盘上。当redis实例宕机恢复数据的时候，可以从RDB的快照文件中恢复数据。AOF的含义是追加文件。当redis执行写命令的时候，都会存储到这个文件中。当redis实例宕机恢复数据的时候，会从这个文件中再次执行一遍命令来恢复数据。</p><h5 id="9-这两种方式哪种恢复的比较快呢">9. 这两种方式，哪种恢复的比较快呢？</h5><p>RDB因为是二进制文件，保存时体积也比较小，所以它恢复得比较快。但它有可能会丢数据。我们通常在项目中也会使用AOF来恢复数据。虽然AOF恢复的速度慢一些，但它丢数据的风险要小很多。在AOF文件中可以设置刷盘策略。我们当时设置的就是每秒批量写入一次命令</p><h5 id="10-redis的过期策略有哪些">10. Redis的过期策略有哪些</h5><p>嗯~，在redis中提供了两种数据过期删除策略。第一种是惰性删除。在设置该key过期时间后，我们不去管它。当需要该key时，我们检查其是否过期。如果过期，我们就删掉它；反之，返回该key。第二种是定期删除。就是说，每隔一段时间，我们就对一些key进行检查，并删除里面过期的key。定期清理的两种模式是：1) SLOW模式，是定时任务，执行频率默认为10hz，每次不超过25ms，可以通过修改配置文件redis.conf的hz选项来调整这个次数；2) FAST模式，执行频率不固定，每次事件循环会尝试执行，但两次间隔不低于2ms，每次耗时不超过1ms。Redis的过期删除策略是：惰性删除 + 定期删除两种策略配合使用。</p><h5 id="11-数据淘汰策略有哪些">11. 数据淘汰策略有哪些</h5><p>嗯，这个在redis中提供了很多种，默认是noeviction，不删除任何数据，内部不足时直接报错。这个可以在redis的配置文件中进行设置。里面有两个非常重要的概念：一个是LRU，另外一个是LFU。LRU的意思就是最少最近使用。它会用当前时间减去最后一次访问时间。这个值越大，则淘汰优先级越高。LFU的意思是最少频率使用。它会统计每个key的访问频率。值越小，淘汰优先级越高。我们在项目中设置的是allkeys-lru，它会挑选最近最少使用的数据进行淘汰，把一些经常访问的key留在redis中。</p><h5 id="12-数据库有1000万数据redis只能缓存20w数据如何保证redis中的数据都是热点数据">12. 数据库有1000万数据，Redis只能缓存20w数据。如何保证Redis中的数据都是热点数据？</h5><p>嗯，我想一下()。可以使用allkeys-lru（挑选最近最少使用的数据淘汰）淘汰策略。那留下来的都是经常访问的热点数据。</p><h5 id="13-redis的内存用完了会发生什么">13. Redis的内存用完了会发生什么？</h5><p>嗯~，这个要看redis的数据淘汰策略是什么。如果是默认的配置，redis内存用完以后则直接报错。我们当时设置的是allkeys-lru策略，把最近最常访问的数据留在缓存中。</p><h5 id="14-redis的分布式锁是如何实现的呢">14. Redis的分布式锁是如何实现的呢</h5><p>我们当时使用的是Redisson来实现分布式锁。在挂号业务中，当多个挂号员同时为同一医生同一时间段挂号时，可能会出现号源超卖的问题。底层使用的是setnx和lua脚本来保证原子性</p><h5 id="15-redis实现分布式锁如何合理控制锁的时长">15. Redis实现分布式锁如何合理控制锁的时长</h5><p>嗯，的确。redis的<code>SETNX</code>指令不好控制这个问题。我们当时采用的是redis的一个框架Redisson实现的。在Redisson中需要手动加锁，并且可以控制锁的失效时间和等待时间。当锁住的一个业务还没有执行完成的时候，Redisson会引入一个看门狗机制。就是说，每隔一段时间就检查当前业务是否还持有锁。如果持有，就增加加锁的持有时间。当业务执行完成之后，需要使用释放锁就可以了。还有一个好处就是，在高并发下，一个业务有可能会执行很快。客户1持有锁的时候，客户2来了以后并不会马上被拒绝。它会自旋不断尝试获取锁。如果客户1释放之后，客户2就可以马上持有锁，性能也得到了提升。</p><h5 id="16-redisson实现分布式锁是可重用的吗">16. Redisson实现分布式锁是可重用的吗</h5><p>嗯，是可以重入的。这样做是为了避免死锁的产生。这个重入其实在内部就是判断是否是当前线程持有的锁，如果是当前线程持有的锁就会计数，如果释放锁就会在计数上减一。在存储数据的时候采用的hash结构，大key可以按照自己的业务进行定制，其中小key是当前线程的唯一标识，value是当前线程重入的次数。</p><h5 id="17-redisson可以解决主从一致的问题吗">17. Redisson可以解决主从一致的问题吗</h5><p>这个是不能的。比如，当线程1加锁成功后，master节点数据会异步复制到slave节点，此时如果当前持有Redis锁的master节点宕机，slave节点被提升为新的master节点，假如现在来了一个线程2，再次加锁，会在新的master节点上加锁成功，这个时候就会出现两个节点同时持有一把锁的问题。我们可以利用Redisson提供的红锁来解决这个问题，它的主要作用是，不能只在一个Redis实例上创建锁，应该是在多个Redis实例上创建锁，并且要求在大多数Redis节点上都成功创建锁，红锁中要求是Redis的节点数量要过半。这样就能避免线程1加锁成功后master节点宕机导致线程2成功加锁到新的master节点上的问题了。</p><p>但是，如果使用了红锁，因为需要同时在多个节点上都添加锁，性能就变得非常低，并且运维维护成本也非常高，所以，我们一般在项目中也不会直接使用红锁，并且官方也暂时废弃了这个红锁。</p><h5 id="18-如果业务非要保证数据的强一致性这个该怎么解决呢">18. 如果业务非要保证数据的强一致性，这个该怎么解决呢？</h5><p>嗯~，Redis本身就是支持高可用的，要做到强一致性，就非常影响性能，所以，如果有强一致性要求高的业务，建议使用ZooKeeper实现的分布式锁，它是可以保证强一致性的。</p><hr><h5 id="19-redis集群有哪些方案知道吗">19. Redis集群有哪些方案，知道吗？</h5><p>嗯~~，在Redis中提供的集群方案总共有三种：主从复制、哨兵模式、Redis分片集群。</p><h5 id="20-那你来介绍一下主从同步">20. 那你来介绍一下主从同步</h5><p>嗯，是这样的，单节点Redis的并发能力是有上限的，要进一步提高Redis的并发能力，可以搭建主从集群，实现读写分离。一般都是一主多从，主节点负责写数据，从节点负责读数据，主节点写入数据之后，需要把数据同步到从节点中。</p><h5 id="21-能说一下主从同步数据的流程吗">21. 能说一下，主从同步数据的流程吗？</h5><p>嗯~~，好！主从同步分为了两个阶段，一个是全量同步，一个是增量同步。</p><p>全量同步是指从节点第一次与主节点建立连接的时候使用全量同步，流程是这样的：</p><p>第一：从节点请求主节点同步数据，其中从节点会携带自己的replication id和offset偏移量。</p><p>第二：主节点判断是否是第一次请求，主要判断的依据就是，主节点与从节点是否是同一个replication id，如果不是，就说明是第一次同步，那主节点就会把自己的replication id和offset发送给从节点，让从节点与主节点的信息保持一致。</p><p>第三：在同时主节点会执行<code>BGSAVE</code>，生成RDB文件后，发送给从节点去执行，从节点先把自己的数据清空，然后执行主节点发送过来的RDB文件，这样就保持了一致。</p><p>当然，如果在RDB生成执行期间，依然有请求到了主节点，而主节点会以命令的方式记录到缓冲区，缓冲区是一个日志文件，最后把这个日志文件发送给从节点，这样就能保证主节点与从节点完全一致了，后期再同步数据的时候，都是依赖于这个日志文件，这个就是全量同步。</p><p>增量同步指的是，当从节点服务重启之后，数据就不一致了，所以这个时候，从节点会请求主节点同步数据，主节点还是判断不是第一次请求，不是第一次就获取从节点的offset值，然后主节点从命令日志中获取offset值之后的数据，发送给从节点进行数据同步。</p><h5 id="22-怎么保证redis的高并发高可用">22. 怎么保证Redis的高并发高可用？</h5><p>首先可以搭建主从集群，再加上使用Redis中的哨兵模式，哨兵模式可以实现主从集群的自动故障恢复，里面就包含了对主从服务的监控、自动故障恢复、通知；如果master故障，Sentinel会将一个slave提升为master。当故障实例恢复后也以新的master为主；同时Sentinel也充当Redis客户端的服务发现来源，当集群发生故障转移时，会将最新信息推送给Redis的客户端，所以一般项目都会采用哨兵的模式来保证Redis的高并发高可用。</p><h5 id="23-你们使用redis是单点还是集群哪种集群">23. 你们使用Redis是单点还是集群，哪种集群？</h5><p>嗯！我们当时使用的是主从（1主1从）加哨兵。一般单节点不超过10G内存，如果Redis内存不足则可以给不同服务分配独立的Redis主从节点。尽量不做分片集群。因为集群维护起来比较麻烦，并且集群之间的心跳检测和数据通信会消耗大量的网络带宽，也没有办法使用Lua脚本和事务。</p><h5 id="24-redis集群脑该怎么解决呢">24. Redis集群脑，该怎么解决呢？</h5><p>嗯！这个在项目中很少见，不过脑裂的问题是这样的，我们现在用的是Redis的哨兵模式集群的。</p><p>有的时候由于网络等原因可能会出现脑裂的情况，就是说，由于Redis master节点和Redis slave节点和Sentinel处于不同的网络分区，使得Sentinel没有能够心跳感知到master，所以通过选举的方式提升了一个slave为master，这样就存在了两个master，就像大脑分裂了一样，这样会导致客户端还在old master那里写入数据，新节点无法同步数据，当网络恢复后，Sentinel会将old master降为slave，这时再从新master同步数据，这会导致old master中的大量数据丢失。</p><p>关于解决的话，我记得在Redis的配置中可以设置：第一可以设置最少的slave节点个数，比如设置至少要有一个从节点才能同步数据，第二个可以设置主从数据复制和同步的延迟时间，达不到要求就拒绝请求，就可以避免大量的数据丢失。</p><h5 id="25-redis的分片集群有什么作用">25. Redis的分片集群有什么作用</h5><p>分片集群主要解决的是海量数据存储的问题，集群中有多个master，每个master保存不同数据，并且还可以给每个master设置多个slave节点，就可以继续增大集群的高并发能力。同时每个master之间通过ping监测彼此健康状态，就类似于哨兵模式了。当客户端请求可以访问集群任意节点，最终都会被转发到正确节点。</p><h5 id="26-redis分片集群中数据是怎么存储和读取的">26. Redis分片集群中数据是怎么存储和读取的？</h5><p>嗯~，在Redis集群中是这样的：</p><p>Redis 集群引入了哈希槽的概念，有 16384 个哈希槽，集群中每个主节点绑定了一定范围的哈希槽范围，key通过CRC16校验后对16384取模来决定放置哪个槽，通过槽找到对应的节点进行存储。取值的逻辑是一样的。</p><h5 id="27-redis是单线程的但是为什么还那么快">27. Redis是单线程的，但是为什么还那么快？</h5><p>嗯，这个有几个原因吧~~~</p><ol type="1"><li>完全基于内存的，C语言编写。</li><li>采用单线程，避免不必要的上下文切换和竞争条件。</li><li>使用多路I/O复用模型，非阻塞IO。</li></ol><p>例如：<code>BGSAVE</code>和<code>BGREWRITEAOF</code>都是在后台执行操作，不影响主线程的正常使用，不会产生阻塞。</p><h5 id="28-能解释一下io多路复用模型简历还我">28. 能解释一下I/O多路复用模型？（简历还我）</h5><p>嗯~~，I/O多路复用是指利用单个线程来同时监听多个Socket，并且在某个Socket可读、可写时得到通知，从而避免无效的等待，充分利用CPU资源。目前的I/O多路复用都是采用的epoll模式实现，它会在通知用户进程Socket就绪的同时，把已就绪的Socket写入用户空间，不需要挨个遍历Socket来判断是否就绪，提升了性能。</p><p>其中Redis的网络模型就是使用I/O多路复用结合事件的处理器来应对多个Socket请求，比如，提供了连接应答处理器、命令回复处理器，命令请求处理器；</p><p>在Redis6.0之后，为了提升更好的性能，在命令回复处理器使用了多线程来处理回复事件，在命令请求处理器中，将命令的转换使用了多线程，增加命令转换速度，在命令执行的时候，依然是单线程</p><h4 id="二mysql">二、MySQL</h4><h5 id="1-在mysql中如何定位慢查询呢">1. 在MySQL中，如何定位慢查询呢？</h5><p>嗯，我们当时在做压力测试时发现有些接口响应时间非常慢，压测的结果大概是5秒钟，我们在MySQL中开启了，慢日志查询，设置的值就是2秒，一但SQL的执行时间超过2秒就会记录到日志中</p><h5 id="2-那这个sql语句执行很慢如何分析呢">2. 那这个SQL语句执行很慢，如何分析呢？</h5><p>如果一条SQL执行很慢，我们通常会使用MySQL的<code>EXPLAIN</code>命令来分析这条SQL的执行情况。通过<code>key</code>和<code>key_len</code>可以检查是否命中了索引，如果已经添加了索引，也可以判断索引是否有效。通过<code>type</code>字段可以查看SQL是否有优化空间，比如是否存在全索引扫描或全表扫描。通过<code>extra</code>建议可以判断是否出现回表情况，如果出现，可以尝试添加索引或修改返回字段来优化。</p><h5 id="3-那你了解过索引吗什么是索引">3. 那你了解过索引吗？什么是索引</h5><p>嗯，索引在项目中非常常见，它是一种帮助MySQL高效获取数据的数据结构，主要用来提高数据检索效率，降低数据库的I/O成本。同时，索引列可以对数据进行排序，降低数据排序的成本，也能减少CPU的消耗。</p><h5 id="4-索引的底层数据结构了解过吗">4. 索引的底层数据结构了解过吗？</h5><p>MySQL的默认存储引擎InnoDB使用的是B+树作为索引的存储结构。选择B+树的原因包括：节点可以有更多子节点，路径更短；磁盘读写代价更低，非叶子节点只存储键值和指针，叶子节点存储数据；B+树适合范围查询和扫描，因为叶子节点形成了一个双向链表。</p><h5 id="5-b树与b树的区别是什么">5. B+树与B树的区别是什么？</h5><ol type="1"><li>B树的非叶子节点和叶子节点都存放数据，而B+树的所有数据只出现在叶子节点，这使得B+树在查询时效率更稳定。</li><li>B+树在进行范围查询时效率更高，因为所有数据都在叶子节点，并且叶子节点之间形成了双向链表。</li></ol><h5 id="6-什么是聚簇索引什么是非聚簇索引">6. 什么是聚簇索引什么是非聚簇索引</h5><p>好的~聚簇索引是指数据与索引放在一起，B+树的叶子节点保存了整行数据，通常只有一个聚簇索引，一般是由主键构成。</p><p>非聚簇索引则是数据与索引分开存储，B+树的叶子节点保存的是主键值，可以有多个非聚簇索引，通常我们自定义的索引都是非聚簇索引。</p><h5 id="7-什么是回表查询呢">7. 什么是回表查询呢</h5><p>嗯，其实跟刚才介绍的聚簇索引和非聚簇索引是有关系的，回表的意思就是通过二级索引找到对应的主键值，然后再通过主键值找到聚集索引中所对应的整行数据，这个过程就是回表 【备注:如果面试官直接问回表，则需要先介绍聚簇索引和非聚簇索引】</p><h5 id="8-知道什么是覆盖索引吗">8. 知道什么是覆盖索引吗？</h5><p>嗯~，清楚的 覆盖索引是指select查询语句使用了索引，在返回的列，必须在索引中全部能够找到，如果我们使用id查询，它会直接走聚集索引查询，一次索引扫描，直接返回数据，性能高。 如果按照二级索引查询数据的时候，返回的列中没有创建索引，有可能会触发回表查询，尽量避免使用select*，尽量在返回的列中都包含添加索引的字段</p><h5 id="9-mysql超大分页怎么处理">9. MySQL超大分页怎么处理</h5><p>嗯，超大分页通常发生在数据量大的情况下，使用<code>LIMIT</code>分页查询且需要排序时效率较低。可以通过覆盖索引和子查询来解决。首先查询数据的ID字段进行分页，然后根据ID列表用子查询来过滤只查询这些ID的数据，因为查询ID时使用的是覆盖索引，所以效率可以提升。</p><h5 id="10-索引的创建原则有哪些">10. 索引的创建原则有哪些</h5><p>嗯，这个情况有很多，不过都有一个大前提，就是表中的数据要超过10万以上，我们才会创建索引，并且添加索引的字段是查询比较频繁的字段，一般也是像作为查询条件，排序字段或分组的字段这些。 还有就是，我们通常创建索引的时候都是使用复合索引来创建，一条SQL的返回值，尽量使用覆盖索引，如果字段的区分度不高的话，我们也会把它放在组合索引后面的字段。 如果某一个字段的内容较长，我们会考虑使用前缀索引来使用，当然并不是所有的字段都要添加索引，这个索引的数量也要控制，因为添加索引也会导致新增改的速度变慢。</p><h5 id="11-什么情况下索引会失效">11. 什么情况下索引会失效</h5><p>嗯，这个情况比较多，我说一些自己的经验，以前遇到过的 比如，索引在使用的时候没有遵循最左匹配法则，第二个是，模糊查询，如果%号在前面也会导致索引失效。如果在添加索引的字段上进行了运算操作或者类型转换也都会导致索引失效。 我们之前还遇到过一个就是，如果使用了复合索引，中间使用了范围查询，右边的条件索引也会失效所以，通常情况下，想要判断出这条sql是否有索引失效的情况，可以使用explain执行计划来分析</p><h5 id="12-谈一谈你对sql优化的经验面试常见">12. 谈一谈你对SQL优化的经验？（面试常见）</h5><p>候选人:嗯，这个在项目还是挺常见的，当然如果直说sql优化的话，我们会从这几方面考虑，比如建表的时候、使用索引、sql语句的编写、主从复制，读写分离，还有一个是如果量比较大的话，可以考虑分库分表</p><h5 id="13-创建表的时候你们是如何优化的呢">13. 创建表的时候，你们是如何优化的呢？</h5><p>创建表时，我们主要参考阿里云的开发手册，选择字段类型时结合字段内容，比如如果是数值的话，像tinyint、int、bigint这些类型，要根据实际情况选择。如果是字符串类型，也是结合存储的内容来选择char和varchar或者text类型</p><h5 id="14-在使用索引的时候是如何优化呢">14. 在使用索引的时候，是如何优化呢？</h5><p>在使用索引时，我们遵循索引创建原则，确保索引字段是查询频繁的，使用复合索引覆盖SQL返回值，避免在索引字段上进行运算或类型转换，以及控制索引数量。</p><h5 id="15-你平时对sql语句做了哪些优化呢">15. 你平时对SQL语句做了哪些优化呢？</h5><p>嗯，这个也有很多，比如SELECT语句务必指明字段名称，不要直接使用select*，还有就是要注意SQL语句避免造成索引失效的写法;如果是聚合查询，尽量使用<code>UNION ALL</code>代替<code>UNION</code>，表关联时优先使用<code>INNER JOIN</code>，以及在必须使用<code>LEFT JOIN</code>或<code>RIGHT JOIN</code>时，确保小表作为驱动表。</p><h5 id="16-事务的特征是什么可以详细说一下吗">16. 事务的特征是什么，可以详细说一下吗</h5><p>事务的特性是ACID，即原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability）。例如，A向B转账500元，这个操作要么都成功，要么都失败，体现了原子性。转账过程中数据要保持一致，A扣除了500元，B必须增加500元。隔离性体现在A向B转账时，不受其他事务干扰。持久性体现在事务提交后，数据要被持久化存储。</p><h5 id="17--并发事务带来哪些问题">17 . 并发事务带来哪些问题？</h5><p>并发事务可能导致脏读、不可重复读和幻读。脏读是指一个事务读到了另一个事务未提交的“脏数据”。不可重复读是指在一个事务内多次读取同一数据，由于其他事务的修改导致数据不一致。幻读是指一个事务读取到了其他事务插入的“幻行”。</p><h5 id="18-怎么解决这些问题呢-mysql的默认隔离级别是">18. 怎么解决这些问题呢？ MySQL的默认隔离级别是</h5><p>MySQL,支持四种隔离级别，分别有: 第一个是，未提交读(read uncommitted）它解决不了刚才提出的所有问题，一般项目中也不用这个。第二个是读已提交(read committed）它能解决脏读的问题的，但是解决不了不可重复读和幻读。第三个是可重复读（repeatable read）它能解决脏读和不可重复读，但是解决不了幻读，这个也是mysql默认的隔离级别。第四个是串行化(serializable)它可以解决刚才提出来的所有问题，但是由于让是事务串行执行的，性能比较低。所以，我们一般使用的都是mysql默认的隔离级别:可重复读</p><h5 id="19-undo-log和redo-log-的区别">19. undo log和redo log 的区别</h5><p>好的，其中redo log日志记录的是数据页的物理变化，服务宕机可用来同步数据，而undo log不同，它主要记录的是逻辑日志，当事务回滚时，通过逆操作恢复原来的数据，比如我们删除一条数据的时候，就会在undo log日志文件中新增一条delete语句，如果发生回滚就执行逆操作; redo log保证了事务的持久性，undo log保证了事务的原子性和一致性</p><h5 id="20-事务中的隔离性是如何保障的呢请你解释一下mvcc面试常考">20. 事务中的隔离性是如何保障的呢？（请你解释一下MVCC）[面试常考]</h5><p>事务的隔离性是由锁和mvcc实现的。 其中mwcc的意思是多版本并发控制。指维护一个数据的多个版本，使得读写操作没有冲突，它的底层实现主要是分为了三个部分，第一个是隐藏字段，第二个是undo log日志，第三个是readView读视图隐藏字段是指:在mysql中给每个表都设置了隐藏字段，有一个是trx_id(事务id)，记录每一次操作的事务id，是自增的;另一个字段是roll_pointer(回滚指针)，指向上一个版本的事务版本记录地址 undo log主要的作用是记录回滚日志，存储老版本数据，在内部会形成一个版本链，在多个事务并行操作某一行记录，记录不同事务修改数据的版本，通过roll_pointer指针形成一个链表 readView解决的是一个事务查询选择版本的问题，在内部定义了一些匹配规则和当前的一些事务id判断该访问那个版本的数据，不同的隔离级别快照读是不一样的，最终的访问的结果不一样。如果是rc隔离级别，每一次执行快照读时生成ReadView，如果是rr隔离级别仅在事务中第一次执行快照读时生成ReadView，后续复用</p><p>简洁版：</p><p>事务的隔离性通过锁和多版本并发控制（MVCC）来保证。MVCC通过维护数据的多个版本来避免读写冲突。底层实现包括隐藏字段、<code>undo log</code>和<code>read view</code>。隐藏字段包括<code>trx_id</code>和<code>roll_pointer</code>。<code>undo log</code>记录了不同版本的数据，通过<code>roll_pointer</code>形成版本链。<code>read view</code>定义了不同隔离级别下的快照读，决定了事务访问哪个版本的数据。</p><h5 id="21-主从复制的原理是什么">21. 主从复制的原理是什么</h5><p>MySQL主从复制的核心是二进制日志（Binlog）。步骤如下：</p><ol type="1"><li>主库在事务提交时记录数据变更到Binlog。</li><li>从库读取主库的Binlog并写入中继日志（Relay Log）。</li><li>从库重做中继日志中的事件，反映到自己的数据中。</li></ol><h5 id="22-你们项目用过mysql的分库分表吗">22. 你们项目用过MySQL的分库分表吗？</h5><p>我们采用微服务架构，每个微服务对应一个数据库，是根据业务进行拆分的，这个其实就是垂直拆分。</p><h5 id="23-那你之前使用过水平分库吗">23. 那你之前使用过水平分库吗？</h5><p>使用过。当时业务发展迅速，某个表数据量超过1000万，单库优化后性能仍然很慢，因此采用了水平分库。我们首先部署了3台服务器和3个数据库，使用mycat进行数据分片。旧数据也按照ID取模规则迁移到了各个数据库中，这样各个数据库可以分摊存储和读取压力，解决了性能问题。</p><h4 id="三-框架篇">三、 框架篇</h4><h5 id="1-spring框架中的单例bean是线程安全的吗">1. Spring框架中的单例bean是线程安全的吗？</h5><p>不是线程安全的。当多用户同时请求一个服务时，容器会给每个请求分配一个线程，这些线程会并发执行业务逻辑。如果处理逻辑中包含对单例状态的修改，比如修改单例的成员属性，就必须考虑线程同步问题。Spring框架本身并不对单例bean进行线程安全封装，线程安全和并发问题需要开发者自行处理。</p><p>通常在项目中使用的Spring bean是不可变状态（如Service类和DAO类），因此在某种程度上可以说Spring的单例bean是线程安全的。如果bean有多种状态（如ViewModel对象），就需要自行保证线程安全。最简单的解决办法是将单例bean的作用域由“singleton”变更为“prototype”。</p><h5 id="2-什么是aop">2. 什么是AOP？</h5><p>AOP，即面向切面编程，在Spring中用于将那些与业务无关但对多个对象产生影响的公共行为和逻辑抽取出来，实现公共模块复用，降低耦合。常见的应用场景包括公共日志保存和事务处理。</p><h5 id="3-你们项目中有没有使用到aop">3. 你们项目中有没有使用到AOP</h5><p>我们之前在后台管理系统中使用AOP来记录系统操作日志。主要思路是使用AOP的环绕通知和切点表达式，找到需要记录日志的方法，然后通过环绕通知的参数获取请求方法的参数，例如类信息、方法信息、注解、请求方式等，并将这些参数保存到数据库。</p><h5 id="4-spring的事务是如何实现的">4. Spring的事务是如何实现的</h5><p>Spring实现事务的本质是利用AOP完成的。它对方法前后进行拦截，在执行方法前开启事务，在执行完目标方法后根据执行情况提交或回滚事务。</p><h5 id="5-spring的事务失效的场景有哪些">5. Spring的事务失效的场景有哪些</h5><p>在项目中，我遇到过几种导致事务失效的场景：</p><ol type="1"><li>有一次我们在方法内部捕获并处理了异常，没有将异常抛出，会导致事务失效。因此，处理异常后应该确保异常能够被抛出。</li><li>如果方法抛出检查型异常（checked exception），并且没有在<code>@Transactional</code>注解上配置<code>rollbackFor</code>属性为<code>Exception</code>，那么异常发生时事务可能不会回滚。</li><li>如果事务注解的方法不是公开（public）修饰的，也可能导致事务失效。</li></ol><h5 id="6-spring的bean的生命周期易考">6. Spring的bean的生命周期（易考）</h5><p>Spring中bean的生命周期包括以下步骤：</p><ol type="1"><li>通过<code>BeanDefinition</code>获取bean的定义信息。</li><li>调用构造函数实例化bean。</li><li>进行bean的依赖注入，例如通过setter方法或<code>@Autowired</code>注解。</li><li>处理实现了<code>Aware</code>接口的bean。通过Aware接口可以获取到bean的一些基本信息,比如bean的名称 bean的工厂和ApplicationContext</li><li>执行<code>BeanPostProcessor</code>的前置处理器。</li><li>调用初始化方法，如实现了<code>InitializingBean</code>接口或自定义的<code>init-method</code>。</li><li>执行<code>BeanPostProcessor</code>的后置处理器，可能在这里产生代理对象。</li><li>最后是销毁bean。</li></ol><h5 id="7-spring中的循环引用问题">7. Spring中的循环引用问题</h5><p>循环依赖发生在两个或两个以上的bean互相持有对方，形成闭环。Spring框架允许循环依赖存在，并通过三级缓存解决大部分循环依赖问题：</p><ol type="1"><li>一级缓存：单例池，缓存已完成初始化的bean对象。</li><li>二级缓存：缓存尚未完成生命周期的早期bean对象。</li><li>三级缓存：缓存<code>ObjectFactory</code>，用于创建bean对象。</li></ol><h5 id="8-你能说一说具体流程吗">8. 你能说一说具体流程吗</h5><p>解决循环依赖的流程如下：</p><ol type="1"><li>实例化A对象，并创建<code>ObjectFactory</code>存入三级缓存。</li><li>A在初始化时需要B对象，开始B的创建逻辑。</li><li>B实例化完成，也创建<code>ObjectFactory</code>存入三级缓存。</li><li>B需要注入A，通过三级缓存获取<code>ObjectFactory</code>生成A对象，存入二级缓存。</li><li>B通过二级缓存获得A对象后，B创建成功，存入一级缓存。</li><li>A对象初始化时，由于B已创建完成，可以直接注入B，A创建成功存入一级缓存。</li><li>清除二级缓存中的临时对象A。</li></ol><h5 id="9-构造方法出现了循环依赖怎么解决">9. 构造方法出现了循环依赖怎么解决</h5><p>由于构造函数是bean生命周期中最先执行的，Spring框架无法解决构造方法的循环依赖问题。可以使用<code>@Lazy</code>懒加载注解，延迟bean的创建直到实际需要时。</p><h5 id="10-springmvc的执行流程知道吗">10. SpringMVC的执行流程知道吗</h5><p>SpringMVC的执行流程包括以下步骤：</p><ol type="1"><li>用户发送请求到前端控制器<code>DispatcherServlet</code>。</li><li><code>DispatcherServlet</code>调用<code>HandlerMapping</code>找到具体处理器。</li><li><code>HandlerMapping</code>返回处理器对象及拦截器（如果有）给<code>DispatcherServlet</code>。</li><li><code>DispatcherServlet</code>调用<code>HandlerAdapter</code>(处理器适配器)。</li><li><code>HandlerAdapter</code>适配并调用具体处理器（Controller）。</li><li>在方法上添加了@ResponseBody注解</li><li>通过HttpMessageConverter来返回结果转换为JSON并且响应</li></ol><h5 id="11-springboot的自动装配原理易考">11. SpringBoot的自动装配原理（易考）</h5><p>Spring Boot的自动配置原理基于<code>@SpringBootApplication</code>注解，它封装了<code>@SpringBootConfiguration</code>、<code>@EnableAutoConfiguration</code>和<code>@ComponentScan</code>。<code>@EnableAutoConfiguration</code>是核心，它通过<code>@Import</code>导入配置选择器，读取<code>META-INF/spring.factories</code>文件中的类名，根据条件注解决定是否将配置类中的Bean导入到Spring容器中。</p><h5 id="12-spring框架常见注解">12. spring框架常见注解</h5><p>Spring的常见注解包括：</p><ol type="1"><li>声明Bean的注解：<code>@Component</code>、<code>@Service</code>、<code>@Repository</code>、<code>@Controller</code>。</li><li>依赖注入相关注解：<code>@Autowired</code>、<code>@``Qualifier</code>、<code>@Resource</code>。</li><li>设置作用域的注解：<code>@Scope</code>。</li><li>配置相关注解：<code>@Configuration</code>、<code>@ComponentScan</code>、<code>@Bean</code>。</li><li>AOP相关注解：<code>@Aspect</code>、<code>@Before</code>、<code>@After</code>、<code>@Around</code>、<code>@Pointcut</code>。</li></ol><h5 id="13-springmvc的常见注解">13. SpringMVC的常见注解</h5><p>SpringMVC的常见注解有：</p><ul><li><code>@RequestMapping</code>：映射请求路径。</li><li><code>@RequestBody</code>：接收HTTP请求的JSON数据。</li><li><code>@RequestParam</code>：指定请求参数名称。</li><li><code>@PathVariable</code>：从请求路径中获取参数。</li><li><code>@ResponseBody</code>：将Controller方法返回的对象转化为JSON。</li><li><code>@RequestHeader</code>：获取请求头数据。</li><li><code>@PostMapping</code>、<code>@GetMapping</code>等。</li></ul><h5 id="14-springboot的常见注解">14. Springboot的常见注解</h5><p>Spring Boot的常见注解包括：</p><ul><li><code>@SpringBootApplication</code>：由<code>@``SpringBootConfiguration</code>、<code>@``EnableAutoConfiguration</code>和<code>@``ComponentScan</code>组成。</li><li>其他注解如<code>@RestController</code>、<code>@GetMapping</code>、<code>@PostMapping</code>等，用于简化Spring MVC的配置。</li></ul><h5 id="15spring和springboot之间有什么区别">15.Spring和SpringBoot之间有什么区别？</h5><p>Spring 和 Spring Boot 的区别在于它们的目标和用途不同。Spring 是一个轻量级的开源框架，它提供了一种简单的方式来构建企业级应用程序。Spring Boot 则是 Spring 框架的延伸和扩展，它提供了一种快速构建应用程序的方式。开发人员可以通过使用 Spring Boot Starter 来快速集成常用的第三方库和框架，使得开发人员可以快速构建出一个可运行的应用程序。</p><h5 id="16-请你描述一下spring的di和ioc">16. 请你描述一下Spring的DI和IOC、</h5><p>IoC 和 DI 都是 Spring 框架中的核心概念，它们的区别在于:</p><ul><li><strong>IoC（Inverse of Control，控制反转）</strong>：它是一种思想，主要解决程序设计中的对象依赖关系管理问题。在 IoC 思想中，对象的创建权反转给第三方容器，由容器进行对象的创建及依赖关系的管理。</li><li><strong>DI（Dependency Injection，依赖注入）</strong>：它是 IoC 思想的具体实现方式之一，用于实现 IoC。在 Spring 中，依赖注入是指:在对象创建时，由容器自动将依赖对象注入到需要依赖的对象中。</li></ul><p>简单来说，它们的关系是：</p><ul><li>IoC 是一种思想、理念，定义了对象创建和依赖关系处理的方式。</li><li>DI 是 IoC 思想的具体实现方式之一，实际提供对象依赖关系的注入功能。</li></ul><p>例如在 Spring 框架中：</p><ul><li>IoC 体现为 Spring 容器承担了对象创建及依赖关系管理的控制权。</li><li>DI 体现为 Spring 容器通过构造方法注入、Setter 方法注入等方式，将依赖对象注入到需要依赖的对象中。</li></ul><h5 id="17jdk动态代理和cglib动态代理有什么区别">17.JDK动态代理和CGLIB动态代理有什么区别？</h5><p>JDK 动态代理和 CGLIB 动态代理都是常见的动态代理实现技术，但它们有以下区别：</p><ul><li>JDK 动态代理基于接口，要求目标对象实现接口；CGLIB 动态代理基于类，可以代理没有实现接口的目标对象。</li><li>JDK 动态代理使用 java.lang.reflect.Proxy 和 java.lang.reflect.InvocationHandler 来生成代理对象；CGLIB 动态代理使用 CGLIB 库来生成代理对象。</li><li>JDK 动态代理生成的代理对象是目标对象的接口实现；CGLIB 动态代理生成的代理对象是目标对象的子类。</li><li>JDK 动态代理性能相对较高，生成代理对象速度较快；CGLIB 动态代理性能相对较低，生成代理对象速度较慢。</li><li>CGLIB 动态代理无法代理 final 类和 final 方法；JDK 动态代理可以代理任意类</li></ul><h5 id="18拦截器和过滤器有什么区别">18.拦截器和过滤器有什么区别</h5><p>拦截器和过滤器的区别主要体现在以下 5 点：</p><ol type="1"><li><strong>出身不同</strong>：过滤器来自于 Servlet，而拦截器来自于 Spring 框架；</li><li><strong>触发时机不同</strong>：请求的执行顺序是：请求进入容器 &gt; 进入过滤器 &gt; 进入 Servlet &gt; 进入拦截器 &gt; 执行控制器（Controller），所以过滤器和拦截器的执行时机，是过滤器会先执行，然后才会执行拦截器，最后才会进入真正的要调用的方法；</li><li><strong>底层实现不同</strong>：过滤器是基于方法回调实现的，拦截器是基于动态代理（底层是反射）实现的；</li><li><strong>支持的项目类型不同</strong>：过滤器是 Servlet 规范中定义的，所以过滤器要依赖 Servlet 容器，它只能用在 Web 项目中；而拦截器是 Spring 中的一个组件，因此拦截器既可以用在 Web 项目中，同时还可以用在 Application 或 Swing 程序中；</li><li><strong>使用的场景不同</strong>：因为拦截器更接近业务系统，所以拦截器主要用来实现项目中的业务判断的，比如：登录判断、权限判断、日志记录等业务；而过滤器通常是用来实现通用功能过滤的，比如：敏感词过滤、字符集编码设置、响应数据压缩等功能。</li></ol><h5 id="19-autowired-和-resource-有什么不同">19. <strong>@Autowired 和 @Resource</strong> 有什么不同</h5><p>@Autowired 和 @Resource 都是用来实现依赖注入的注解（在 Spring/Spring Boot 项目中），但二者却有着 5 点不同：</p><ol type="1"><li>来源不同：@Autowired 来自 Spring 框架，而 @Resource 来自于（Java）JSR-250；</li><li>依赖查找的顺序不同：@Autowired 先根据类型再根据名称查询，而 @Resource 先根据名称再根据类型查询；</li><li>支持的参数不同：@Autowired 只支持设置 1 个参数，而 @Resource 支持设置 7 个参数；</li><li>依赖注入的用法支持不同：@Autowired 既支持构造方法注入，又支持属性注入和 Setter 注入，而 @Resource 只支持属性注入和 Setter 注入；</li><li>编译器 IDEA 的提示不同：当注入 Mapper 对象时，使用 @Autowired 注解编译器会提示错误，而使用 @Resource 注解则不会提示错误</li></ol><h5 id="20-mybatis的执行流程是什么">20. MyBatis的执行流程是什么</h5><p>MyBatis的执行流程如下：</p><ol type="1"><li>读取MyBatis配置文件<code>mybatis-config.xml</code>。</li><li>构造会话工厂<code>SqlSessionFactory</code>。</li><li>会话工厂创建<code>SqlSession</code>对象。</li><li>操作数据库的接口，<code>Executor</code>执行器。</li><li><code>Executor</code>执行方法中的<code>MappedStatement</code>参数。</li><li>输入参数映射。</li><li>输出结果映射。</li></ol><h5 id="21-mybatis是否支持延迟加载">21. Mybatis是否支持延迟加载？</h5><p>MyBatis支持延迟加载，即在需要用到数据时才加载。可以通过配置文件中的<code>lazyLoadingEnabled</code>配置启用或禁用延迟加载。</p><h5 id="22-延迟加载的底层原理知道吗">22. 延迟加载的底层原理知道吗？</h5><p>延迟加载的底层原理主要使用CGLIB动态代理实现：</p><ol type="1"><li>使用CGLIB创建目标对象的代理对象。</li><li>调用目标方法时，如果发现是null值，则执行SQL查询。</li><li>获取数据后，设置属性值并继续查询目标方法。</li></ol><h5 id="23-mybatis的一级二级缓存用过吗">23. Mybatis的一级、二级缓存用过吗？</h5><p>MyBatis的一级缓存是基于<code>Perpetual``Cache</code>的HashMap本地缓存，作用域为Session，默认开启。二级缓存需要单独开启，作用域为Namespace或mapper，默认也是采用<code>PerpetualCache</code>，HashMap存储。</p></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://bu.dusays.com/2025/05/30/68398ca86a127.gif&quot;" data-lazy-src="https://bu.dusays.com/2025/03/01/67c2609b7c10b.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://bu.dusays.com/2025/05/30/68398ca86a127.gif&quot;" data-lazy-src="https://bu.dusays.com/2025/03/01/67c2609b7c10b.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">李阳</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.baskly.fun/posts/45509/">原创</a><a class="post-copyright-title"><span onclick='rm.copyPageUrl("https://blog.baskly.fun/posts/45509/")'>java面试黑马版</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.baskly.fun/posts/45509/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=java面试黑马版&amp;url=https://blog.baskly.fun/posts/45509/&amp;pic=https://bu.dusays.com/2024/11/24/674340e151d6a.png?_r_=42d03154-2359-a243-6354-dc19b5770a41" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl(){var e=window.location.href,t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.baskly.fun" target="_blank">李阳的秘密小屋</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/java/"><span class="categoryes-punctuation"><i class="anzhiyufont anzhiyu-icon-inbox"></i></span> java<span class="categoryesPageCount">10</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/javaweb/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span> javaweb<span class="tagsPageCount">9</span></a></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2024/12/24/676a8d8bc7d9f.png?_r_=b766501c-375f-d622-6ca5-bfbc65ab58d7" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/3860/"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://bu.dusays.com/2025/05/30/68398ca86a127.gif&quot;" data-lazy-src="https://bu.dusays.com/2024/11/24/674340e0cd15e.png?_r_=456351c6-24ef-054b-2585-a57c1677c6ef" onerror='onerror=null,src="https://bu.dusays.com/2025/05/30/68398ca86a127.gif"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">黑马学成在线</div></div></a></div><div class="next-post pull-right"><a href="/posts/11096/"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://bu.dusays.com/2025/05/30/68398ca86a127.gif&quot;" data-lazy-src="https://bu.dusays.com/2024/12/24/676a8d8bc7d9f.png?_r_=b766501c-375f-d622-6ca5-bfbc65ab58d7" onerror='onerror=null,src="https://bu.dusays.com/2025/05/30/68398ca86a127.gif"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Redis黑马版</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i> <span>评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left:4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://bu.dusays.com/2025/05/30/68398ca86a127.gif&quot;" data-lazy-src="https://bu.dusays.com/2025/03/01/67c2609b7c10b.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"><div class="author-status"><img class="g-status" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://bu.dusays.com/2025/05/30/68398ca86a127.gif&quot;" data-lazy-src="https://bu.dusays.com/2021/01/15/805daa7195f2c.gif" alt="status"></div></div><div class="author-info__description"><div style="line-height:1.38;margin:.6rem 0;text-align:justify;color:rgba(255,255,255,.8)">这有描绘<b style="color:#fff">我的痕迹</b></div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about"><h1 class="author-info__name">李阳</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/lyay23" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-redis"><span class="toc-number">1.</span> <span class="toc-text">一 、Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%88%91%E7%9C%8B%E4%BD%A0%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8%E4%BA%86redis%E4%BD%A0%E6%9C%80%E8%BF%91%E5%9C%A8%E5%93%AA%E4%BA%9B%E5%9C%BA%E6%99%AF%E4%B8%AD%E4%BD%BF%E7%94%A8%E4%BA%86redis%E5%91%A2"><span class="toc-number">1.1.</span> <span class="toc-text">1. 我看你在项目中使用了Redis，你最近在哪些场景中使用了Redis呢？</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#redis%E7%9A%84%E7%BC%93%E5%AD%98%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.1.1.</span> <span class="toc-text">Redis的缓存在项目中的使用？</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8redisson%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81"><span class="toc-number">1.1.2.</span> <span class="toc-text">为什么使用Redisson分布式锁？</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E9%82%A3%E4%B9%88%E4%BD%A0%E6%98%AF%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E7%9A%84%E9%97%AE%E9%A2%98%E5%91%A2"><span class="toc-number">1.2.</span> <span class="toc-text">2. 那么你是怎么解决缓存穿透的问题呢？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E4%BD%A0%E8%83%BD%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%E5%90%97"><span class="toc-number">1.3.</span> <span class="toc-text">3. 你能介绍一下布隆过滤器吗？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3"><span class="toc-number">1.4.</span> <span class="toc-text">4. 什么是缓存击穿？怎么解决</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3"><span class="toc-number">1.5.</span> <span class="toc-text">5. 什么是缓存雪崩，怎么解决？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-redis%E4%BD%9C%E4%B8%BA%E7%BC%93%E5%AD%98mysql%E4%B8%8Eredis%E6%95%B0%E6%8D%AE%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E5%90%8C%E6%AD%A5%E5%91%A2%E5%8F%8C%E5%86%99%E4%B8%80%E8%87%B4"><span class="toc-number">1.6.</span> <span class="toc-text">6. Redis作为缓存，Mysql与Redis数据如何进行同步呢（双写一致）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-redis%E4%BD%9C%E4%B8%BA%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E6%98%AF%E6%80%8E%E4%B9%88%E5%81%9A%E7%9A%84"><span class="toc-number">1.7.</span> <span class="toc-text">7. Redis作为缓存，数据持久化是怎么做的</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-%E8%BF%99%E4%B8%A4%E7%A7%8D%E6%8C%81%E4%B9%85%E5%8C%96%E6%96%B9%E5%BC%8F%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%E5%91%A2"><span class="toc-number">1.8.</span> <span class="toc-text">8. 这两种持久化方式有什么区别呢？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-%E8%BF%99%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%93%AA%E7%A7%8D%E6%81%A2%E5%A4%8D%E7%9A%84%E6%AF%94%E8%BE%83%E5%BF%AB%E5%91%A2"><span class="toc-number">1.9.</span> <span class="toc-text">9. 这两种方式，哪种恢复的比较快呢？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-redis%E7%9A%84%E8%BF%87%E6%9C%9F%E7%AD%96%E7%95%A5%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">1.10.</span> <span class="toc-text">10. Redis的过期策略有哪些</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-%E6%95%B0%E6%8D%AE%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">1.11.</span> <span class="toc-text">11. 数据淘汰策略有哪些</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#12-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%891000%E4%B8%87%E6%95%B0%E6%8D%AEredis%E5%8F%AA%E8%83%BD%E7%BC%93%E5%AD%9820w%E6%95%B0%E6%8D%AE%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81redis%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E9%83%BD%E6%98%AF%E7%83%AD%E7%82%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">1.12.</span> <span class="toc-text">12. 数据库有1000万数据，Redis只能缓存20w数据。如何保证Redis中的数据都是热点数据？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#13-redis%E7%9A%84%E5%86%85%E5%AD%98%E7%94%A8%E5%AE%8C%E4%BA%86%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88"><span class="toc-number">1.13.</span> <span class="toc-text">13. Redis的内存用完了会发生什么？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14-redis%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%91%A2"><span class="toc-number">1.14.</span> <span class="toc-text">14. Redis的分布式锁是如何实现的呢</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#15-redis%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%A6%82%E4%BD%95%E5%90%88%E7%90%86%E6%8E%A7%E5%88%B6%E9%94%81%E7%9A%84%E6%97%B6%E9%95%BF"><span class="toc-number">1.15.</span> <span class="toc-text">15. Redis实现分布式锁如何合理控制锁的时长</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#16-redisson%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E6%98%AF%E5%8F%AF%E9%87%8D%E7%94%A8%E7%9A%84%E5%90%97"><span class="toc-number">1.16.</span> <span class="toc-text">16. Redisson实现分布式锁是可重用的吗</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#17-redisson%E5%8F%AF%E4%BB%A5%E8%A7%A3%E5%86%B3%E4%B8%BB%E4%BB%8E%E4%B8%80%E8%87%B4%E7%9A%84%E9%97%AE%E9%A2%98%E5%90%97"><span class="toc-number">1.17.</span> <span class="toc-text">17. Redisson可以解决主从一致的问题吗</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#18-%E5%A6%82%E6%9E%9C%E4%B8%9A%E5%8A%A1%E9%9D%9E%E8%A6%81%E4%BF%9D%E8%AF%81%E6%95%B0%E6%8D%AE%E7%9A%84%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%E8%BF%99%E4%B8%AA%E8%AF%A5%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E5%91%A2"><span class="toc-number">1.18.</span> <span class="toc-text">18. 如果业务非要保证数据的强一致性，这个该怎么解决呢？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#19-redis%E9%9B%86%E7%BE%A4%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B9%E6%A1%88%E7%9F%A5%E9%81%93%E5%90%97"><span class="toc-number">1.19.</span> <span class="toc-text">19. Redis集群有哪些方案，知道吗？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#20-%E9%82%A3%E4%BD%A0%E6%9D%A5%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5"><span class="toc-number">1.20.</span> <span class="toc-text">20. 那你来介绍一下主从同步</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#21-%E8%83%BD%E8%AF%B4%E4%B8%80%E4%B8%8B%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5%E6%95%B0%E6%8D%AE%E7%9A%84%E6%B5%81%E7%A8%8B%E5%90%97"><span class="toc-number">1.21.</span> <span class="toc-text">21. 能说一下，主从同步数据的流程吗？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#22-%E6%80%8E%E4%B9%88%E4%BF%9D%E8%AF%81redis%E7%9A%84%E9%AB%98%E5%B9%B6%E5%8F%91%E9%AB%98%E5%8F%AF%E7%94%A8"><span class="toc-number">1.22.</span> <span class="toc-text">22. 怎么保证Redis的高并发高可用？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#23-%E4%BD%A0%E4%BB%AC%E4%BD%BF%E7%94%A8redis%E6%98%AF%E5%8D%95%E7%82%B9%E8%BF%98%E6%98%AF%E9%9B%86%E7%BE%A4%E5%93%AA%E7%A7%8D%E9%9B%86%E7%BE%A4"><span class="toc-number">1.23.</span> <span class="toc-text">23. 你们使用Redis是单点还是集群，哪种集群？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#24-redis%E9%9B%86%E7%BE%A4%E8%84%91%E8%AF%A5%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E5%91%A2"><span class="toc-number">1.24.</span> <span class="toc-text">24. Redis集群脑，该怎么解决呢？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#25-redis%E7%9A%84%E5%88%86%E7%89%87%E9%9B%86%E7%BE%A4%E6%9C%89%E4%BB%80%E4%B9%88%E4%BD%9C%E7%94%A8"><span class="toc-number">1.25.</span> <span class="toc-text">25. Redis的分片集群有什么作用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#26-redis%E5%88%86%E7%89%87%E9%9B%86%E7%BE%A4%E4%B8%AD%E6%95%B0%E6%8D%AE%E6%98%AF%E6%80%8E%E4%B9%88%E5%AD%98%E5%82%A8%E5%92%8C%E8%AF%BB%E5%8F%96%E7%9A%84"><span class="toc-number">1.26.</span> <span class="toc-text">26. Redis分片集群中数据是怎么存储和读取的？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#27-redis%E6%98%AF%E5%8D%95%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%BD%86%E6%98%AF%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E9%82%A3%E4%B9%88%E5%BF%AB"><span class="toc-number">1.27.</span> <span class="toc-text">27. Redis是单线程的，但是为什么还那么快？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#28-%E8%83%BD%E8%A7%A3%E9%87%8A%E4%B8%80%E4%B8%8Bio%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E6%A8%A1%E5%9E%8B%E7%AE%80%E5%8E%86%E8%BF%98%E6%88%91"><span class="toc-number">1.28.</span> <span class="toc-text">28. 能解释一下I&#x2F;O多路复用模型？（简历还我）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8Cmysql"><span class="toc-number">2.</span> <span class="toc-text">二、MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%9C%A8mysql%E4%B8%AD%E5%A6%82%E4%BD%95%E5%AE%9A%E4%BD%8D%E6%85%A2%E6%9F%A5%E8%AF%A2%E5%91%A2"><span class="toc-number">2.1.</span> <span class="toc-text">1. 在MySQL中，如何定位慢查询呢？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E9%82%A3%E8%BF%99%E4%B8%AAsql%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E5%BE%88%E6%85%A2%E5%A6%82%E4%BD%95%E5%88%86%E6%9E%90%E5%91%A2"><span class="toc-number">2.2.</span> <span class="toc-text">2. 那这个SQL语句执行很慢，如何分析呢？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E9%82%A3%E4%BD%A0%E4%BA%86%E8%A7%A3%E8%BF%87%E7%B4%A2%E5%BC%95%E5%90%97%E4%BB%80%E4%B9%88%E6%98%AF%E7%B4%A2%E5%BC%95"><span class="toc-number">2.3.</span> <span class="toc-text">3. 那你了解过索引吗？什么是索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E7%B4%A2%E5%BC%95%E7%9A%84%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%BA%86%E8%A7%A3%E8%BF%87%E5%90%97"><span class="toc-number">2.4.</span> <span class="toc-text">4. 索引的底层数据结构了解过吗？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-b%E6%A0%91%E4%B8%8Eb%E6%A0%91%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">2.5.</span> <span class="toc-text">5. B+树与B树的区别是什么？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-%E4%BB%80%E4%B9%88%E6%98%AF%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%E4%BB%80%E4%B9%88%E6%98%AF%E9%9D%9E%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95"><span class="toc-number">2.6.</span> <span class="toc-text">6. 什么是聚簇索引什么是非聚簇索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-%E4%BB%80%E4%B9%88%E6%98%AF%E5%9B%9E%E8%A1%A8%E6%9F%A5%E8%AF%A2%E5%91%A2"><span class="toc-number">2.7.</span> <span class="toc-text">7. 什么是回表查询呢</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-%E7%9F%A5%E9%81%93%E4%BB%80%E4%B9%88%E6%98%AF%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95%E5%90%97"><span class="toc-number">2.8.</span> <span class="toc-text">8. 知道什么是覆盖索引吗？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-mysql%E8%B6%85%E5%A4%A7%E5%88%86%E9%A1%B5%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86"><span class="toc-number">2.9.</span> <span class="toc-text">9. MySQL超大分页怎么处理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA%E5%8E%9F%E5%88%99%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">2.10.</span> <span class="toc-text">10. 索引的创建原则有哪些</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E7%B4%A2%E5%BC%95%E4%BC%9A%E5%A4%B1%E6%95%88"><span class="toc-number">2.11.</span> <span class="toc-text">11. 什么情况下索引会失效</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#12-%E8%B0%88%E4%B8%80%E8%B0%88%E4%BD%A0%E5%AF%B9sql%E4%BC%98%E5%8C%96%E7%9A%84%E7%BB%8F%E9%AA%8C%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%A7%81"><span class="toc-number">2.12.</span> <span class="toc-text">12. 谈一谈你对SQL优化的经验？（面试常见）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#13-%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E4%BD%A0%E4%BB%AC%E6%98%AF%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E7%9A%84%E5%91%A2"><span class="toc-number">2.13.</span> <span class="toc-text">13. 创建表的时候，你们是如何优化的呢？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14-%E5%9C%A8%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E7%9A%84%E6%97%B6%E5%80%99%E6%98%AF%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E5%91%A2"><span class="toc-number">2.14.</span> <span class="toc-text">14. 在使用索引的时候，是如何优化呢？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#15-%E4%BD%A0%E5%B9%B3%E6%97%B6%E5%AF%B9sql%E8%AF%AD%E5%8F%A5%E5%81%9A%E4%BA%86%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8C%96%E5%91%A2"><span class="toc-number">2.15.</span> <span class="toc-text">15. 你平时对SQL语句做了哪些优化呢？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#16-%E4%BA%8B%E5%8A%A1%E7%9A%84%E7%89%B9%E5%BE%81%E6%98%AF%E4%BB%80%E4%B9%88%E5%8F%AF%E4%BB%A5%E8%AF%A6%E7%BB%86%E8%AF%B4%E4%B8%80%E4%B8%8B%E5%90%97"><span class="toc-number">2.16.</span> <span class="toc-text">16. 事务的特征是什么，可以详细说一下吗</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#17--%E5%B9%B6%E5%8F%91%E4%BA%8B%E5%8A%A1%E5%B8%A6%E6%9D%A5%E5%93%AA%E4%BA%9B%E9%97%AE%E9%A2%98"><span class="toc-number">2.17.</span> <span class="toc-text">17 . 并发事务带来哪些问题？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#18-%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E8%BF%99%E4%BA%9B%E9%97%AE%E9%A2%98%E5%91%A2-mysql%E7%9A%84%E9%BB%98%E8%AE%A4%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%98%AF"><span class="toc-number">2.18.</span> <span class="toc-text">18. 怎么解决这些问题呢？ MySQL的默认隔离级别是</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#19-undo-log%E5%92%8Credo-log-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.19.</span> <span class="toc-text">19. undo log和redo log 的区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#20-%E4%BA%8B%E5%8A%A1%E4%B8%AD%E7%9A%84%E9%9A%94%E7%A6%BB%E6%80%A7%E6%98%AF%E5%A6%82%E4%BD%95%E4%BF%9D%E9%9A%9C%E7%9A%84%E5%91%A2%E8%AF%B7%E4%BD%A0%E8%A7%A3%E9%87%8A%E4%B8%80%E4%B8%8Bmvcc%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%80%83"><span class="toc-number">2.20.</span> <span class="toc-text">20. 事务中的隔离性是如何保障的呢？（请你解释一下MVCC）[面试常考]</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#21-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E7%9A%84%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">2.21.</span> <span class="toc-text">21. 主从复制的原理是什么</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#22-%E4%BD%A0%E4%BB%AC%E9%A1%B9%E7%9B%AE%E7%94%A8%E8%BF%87mysql%E7%9A%84%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%90%97"><span class="toc-number">2.22.</span> <span class="toc-text">22. 你们项目用过MySQL的分库分表吗？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#23-%E9%82%A3%E4%BD%A0%E4%B9%8B%E5%89%8D%E4%BD%BF%E7%94%A8%E8%BF%87%E6%B0%B4%E5%B9%B3%E5%88%86%E5%BA%93%E5%90%97"><span class="toc-number">2.23.</span> <span class="toc-text">23. 那你之前使用过水平分库吗？</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-%E6%A1%86%E6%9E%B6%E7%AF%87"><span class="toc-number">3.</span> <span class="toc-text">三、 框架篇</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-spring%E6%A1%86%E6%9E%B6%E4%B8%AD%E7%9A%84%E5%8D%95%E4%BE%8Bbean%E6%98%AF%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%90%97"><span class="toc-number">3.1.</span> <span class="toc-text">1. Spring框架中的单例bean是线程安全的吗？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%BB%80%E4%B9%88%E6%98%AFaop"><span class="toc-number">3.2.</span> <span class="toc-text">2. 什么是AOP？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E4%BD%A0%E4%BB%AC%E9%A1%B9%E7%9B%AE%E4%B8%AD%E6%9C%89%E6%B2%A1%E6%9C%89%E4%BD%BF%E7%94%A8%E5%88%B0aop"><span class="toc-number">3.3.</span> <span class="toc-text">3. 你们项目中有没有使用到AOP</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-spring%E7%9A%84%E4%BA%8B%E5%8A%A1%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84"><span class="toc-number">3.4.</span> <span class="toc-text">4. Spring的事务是如何实现的</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-spring%E7%9A%84%E4%BA%8B%E5%8A%A1%E5%A4%B1%E6%95%88%E7%9A%84%E5%9C%BA%E6%99%AF%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">3.5.</span> <span class="toc-text">5. Spring的事务失效的场景有哪些</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-spring%E7%9A%84bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%98%93%E8%80%83"><span class="toc-number">3.6.</span> <span class="toc-text">6. Spring的bean的生命周期（易考）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-spring%E4%B8%AD%E7%9A%84%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8%E9%97%AE%E9%A2%98"><span class="toc-number">3.7.</span> <span class="toc-text">7. Spring中的循环引用问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-%E4%BD%A0%E8%83%BD%E8%AF%B4%E4%B8%80%E8%AF%B4%E5%85%B7%E4%BD%93%E6%B5%81%E7%A8%8B%E5%90%97"><span class="toc-number">3.8.</span> <span class="toc-text">8. 你能说一说具体流程吗</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E5%87%BA%E7%8E%B0%E4%BA%86%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3"><span class="toc-number">3.9.</span> <span class="toc-text">9. 构造方法出现了循环依赖怎么解决</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-springmvc%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E7%9F%A5%E9%81%93%E5%90%97"><span class="toc-number">3.10.</span> <span class="toc-text">10. SpringMVC的执行流程知道吗</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-springboot%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E5%8E%9F%E7%90%86%E6%98%93%E8%80%83"><span class="toc-number">3.11.</span> <span class="toc-text">11. SpringBoot的自动装配原理（易考）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#12-spring%E6%A1%86%E6%9E%B6%E5%B8%B8%E8%A7%81%E6%B3%A8%E8%A7%A3"><span class="toc-number">3.12.</span> <span class="toc-text">12. spring框架常见注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#13-springmvc%E7%9A%84%E5%B8%B8%E8%A7%81%E6%B3%A8%E8%A7%A3"><span class="toc-number">3.13.</span> <span class="toc-text">13. SpringMVC的常见注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14-springboot%E7%9A%84%E5%B8%B8%E8%A7%81%E6%B3%A8%E8%A7%A3"><span class="toc-number">3.14.</span> <span class="toc-text">14. Springboot的常见注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#15spring%E5%92%8Cspringboot%E4%B9%8B%E9%97%B4%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB"><span class="toc-number">3.15.</span> <span class="toc-text">15.Spring和SpringBoot之间有什么区别？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#16-%E8%AF%B7%E4%BD%A0%E6%8F%8F%E8%BF%B0%E4%B8%80%E4%B8%8Bspring%E7%9A%84di%E5%92%8Cioc"><span class="toc-number">3.16.</span> <span class="toc-text">16. 请你描述一下Spring的DI和IOC、</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#17jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%92%8Ccglib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB"><span class="toc-number">3.17.</span> <span class="toc-text">17.JDK动态代理和CGLIB动态代理有什么区别？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#18%E6%8B%A6%E6%88%AA%E5%99%A8%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB"><span class="toc-number">3.18.</span> <span class="toc-text">18.拦截器和过滤器有什么区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#19-autowired-%E5%92%8C-resource-%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C"><span class="toc-number">3.19.</span> <span class="toc-text">19. @Autowired 和 @Resource 有什么不同</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#20-mybatis%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">3.20.</span> <span class="toc-text">20. MyBatis的执行流程是什么</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#21-mybatis%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD"><span class="toc-number">3.21.</span> <span class="toc-text">21. Mybatis是否支持延迟加载？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#22-%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E7%9F%A5%E9%81%93%E5%90%97"><span class="toc-number">3.22.</span> <span class="toc-text">22. 延迟加载的底层原理知道吗？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#23-mybatis%E7%9A%84%E4%B8%80%E7%BA%A7%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E7%94%A8%E8%BF%87%E5%90%97"><span class="toc-number">3.23.</span> <span class="toc-text">23. Mybatis的一级、二级缓存用过吗？</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/11096/" title="Redis黑马版"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://bu.dusays.com/2025/05/30/68398ca86a127.gif&quot;" data-lazy-src="https://bu.dusays.com/2024/12/24/676a8d8bc7d9f.png?_r_=b766501c-375f-d622-6ca5-bfbc65ab58d7" onerror='this.onerror=null,this.src="https://bu.dusays.com/2025/05/30/68398ca86a127.gif"' alt="Redis黑马版"></a><div class="content"><a class="title" href="/posts/11096/" title="Redis黑马版">Redis黑马版</a><time datetime="2025-09-08T02:34:21.000Z" title="发表于 2025-09-08 10:34:21">2025-09-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/45509/" title="java面试黑马版"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://bu.dusays.com/2025/05/30/68398ca86a127.gif&quot;" data-lazy-src="https://bu.dusays.com/2024/11/24/674340e151d6a.png?_r_=42d03154-2359-a243-6354-dc19b5770a41" onerror='this.onerror=null,this.src="https://bu.dusays.com/2025/05/30/68398ca86a127.gif"' alt="java面试黑马版"></a><div class="content"><a class="title" href="/posts/45509/" title="java面试黑马版">java面试黑马版</a><time datetime="2025-09-07T02:34:21.000Z" title="发表于 2025-09-07 10:34:21">2025-09-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3860/" title="黑马学成在线"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://bu.dusays.com/2025/05/30/68398ca86a127.gif&quot;" data-lazy-src="https://bu.dusays.com/2024/11/24/674340e0cd15e.png?_r_=456351c6-24ef-054b-2585-a57c1677c6ef" onerror='this.onerror=null,this.src="https://bu.dusays.com/2025/05/30/68398ca86a127.gif"' alt="黑马学成在线"></a><div class="content"><a class="title" href="/posts/3860/" title="黑马学成在线">黑马学成在线</a><time datetime="2025-08-04T02:34:21.000Z" title="发表于 2025-08-04 10:34:21">2025-08-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/42622/" title="SpringCloud"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://bu.dusays.com/2025/05/30/68398ca86a127.gif&quot;" data-lazy-src="https://bu.dusays.com/2024/11/24/674340e0cd15e.png?_r_=320ac6a6-3bf5-9cc8-180a-c9c4b73ea680" onerror='this.onerror=null,this.src="https://bu.dusays.com/2025/05/30/68398ca86a127.gif"' alt="SpringCloud"></a><div class="content"><a class="title" href="/posts/42622/" title="SpringCloud">SpringCloud</a><time datetime="2025-07-13T00:34:21.000Z" title="发表于 2025-07-13 08:34:21">2025-07-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/49515/" title="前端学习（tlias为例）"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://bu.dusays.com/2025/05/30/68398ca86a127.gif&quot;" data-lazy-src="https://bu.dusays.com/2024/11/24/674340e151d6a.png?_r_=90fa1921-0a69-b602-3178-9ee5211c46f1" onerror='this.onerror=null,this.src="https://bu.dusays.com/2025/05/30/68398ca86a127.gif"' alt="前端学习（tlias为例）"></a><div class="content"><a class="title" href="/posts/49515/" title="前端学习（tlias为例）">前端学习（tlias为例）</a><time datetime="2025-05-25T03:34:21.000Z" title="发表于 2025-05-25 11:34:21">2025-05-25</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By 李阳</div><div class="footer_custom_text">下次再见！</div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">20</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">5</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i> <span>隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i> <span>分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i> <span>标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tongji1"></use></svg> <span>统计</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=12781955100&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i> <span>耳机分你一半</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i> <span>留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/todolist/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zuji"></use></svg> <span>脚步</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/essay/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-taiyang"></use></svg> <span>小太阳</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-a-xiaoyangyang_huaban1"></use></svg> <span>了解我</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/408/" style="font-size:.88rem">408<sup>1</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size:.88rem">C语言<sup>1</sup></a><a href="/tags/java/" style="font-size:.88rem;font-weight:500;color:var(--anzhiyu-lighttext)">java<sup>1</sup></a><a href="/tags/javaweb/" style="font-size:.88rem">javaweb<sup>9</sup></a><a href="/tags/%E5%8A%9B%E6%89%A3%E5%88%B7%E9%A2%98/" style="font-size:.88rem">力扣刷题<sup>1</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size:.88rem">操作系统<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size:.88rem">数据结构<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" style="font-size:.88rem">计算机组成原理<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size:.88rem">计算机网络<sup>2</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/" style="font-size:.88rem">软件工程<sup>1</sup></a></div></div><hr></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="anzhiyu.scrollToDest(document.body.scrollHeight,500)"><i class="anzhiyufont anzhiyu-icon-arrow-down"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="12781955100" server="netease" type="playlist" mutex="true" preload="none" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/playlist?id=12781955100&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js").then((()=>{pangu.autoSpacingPage()}))}function panguInit(){GLOBAL_CONFIG_SITE.isPost&&panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>var HoldLog=console.log;console.log=function(){};let now1=new Date;queueMicrotask((()=>{const o=function(){HoldLog.apply(console,arguments)},n=new Date("04/01/2021 00:00:00");now1.setTime(now1.getTime()+250);const c=(now1-n)/1e3/60/60/24,e=["欢迎使用安知鱼!","生活明朗, 万物可爱","\n        \n       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗\n      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║\n      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║\n      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║\n      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝\n      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝\n        \n        ","已上线",Math.floor(c),"天","©2024 By 安知鱼 V1.6.14"],t=["NCC2-036","调用前置摄像头拍照成功，识别为【小笨蛋】.","Photo captured: ","🤪"];setTimeout(o.bind(console,`\n%c${e[0]} %c ${e[1]} %c ${e[2]} %c${e[3]}%c ${e[4]}%c ${e[5]}\n\n%c ${e[6]}\n`,"color:#425AEF","","color:#425AEF","color:#425AEF","","color:#425AEF","")),setTimeout(o.bind(console,`%c ${t[0]} %c ${t[1]} %c \n${t[2]} %c\n${t[3]}\n`,"color:white; background-color:#4fd953","","",'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%')),setTimeout(o.bind(console,"%c WELCOME %c 你好，小笨蛋.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c ⚡ Powered by 安知鱼 %c 你正在访问 李阳 的博客.","color:white; background-color:#f0ad4e","")),setTimeout(o.bind(console,"%c W23-12 %c 你已打开控制台.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c S013-782 %c 你现在正处于监控中.","color:white; background-color:#d9534f",""))}))</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><link rel="stylesheet" href="https://cdn.cbd.int/katex@0.16.0/dist/katex.min.css"><script src="https://cdn.cbd.int/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script>document.querySelectorAll("#article-container span.katex-display").forEach((a=>{anzhiyu.wrap(a,"div",{class:"katex-wrap"})}))</script><script>(()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(e).forEach(((e,n)=>{const d=e.firstElementChild,r="mermaid-"+n,a="%%{init:{ 'theme':'"+t+"'}}%%\n"+d.textContent,i=mermaid.render(r,a);var m;"string"==typeof i?(m=i,d.insertAdjacentHTML("afterend",m)):i.then((({svg:e})=>{d.insertAdjacentHTML("afterend",e)}))}))},n=()=>{window.loadMermaid?t():getScript("https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js").then(t)};anzhiyu.addGlobalFn("themeChange",t,"mermaid"),window.pjax?n():document.addEventListener("DOMContentLoaded",n)})()</script><script>(()=>{const t=()=>{"object"==typeof twikoo?setTimeout(o,0):getScript("https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js").then(o)},o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.baskly.fun",region:"",onCommentLoaded:()=>{anzhiyu.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null)),GLOBAL_CONFIG_SITE.isPost&&(()=>{const t=document.getElementById("twikoo-count");t&&twikoo.getCommentsCount({envId:"https://twikoo.baskly.fun",region:"",urls:[window.location.pathname],includeReply:!1}).then((o=>{t.textContent=o[0].count})).catch((t=>{console.error(t)}))})()};t()})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener("load",(()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++){t+="<div class='aside-list-item'>";{const a="data-lazy-src";t+=`<a href='${e[n].url}' class='thumbnail'><img ${a}='${e[n].avatar}' alt='${e[n].nick}'><div class='name'><span>${e[n].nick} </span></div></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}' title='${e[n].content}'>${e[n].content}</a>\n        <time datetime="${e[n].date}">${anzhiyu.diffDate(e[n].date,!0)}</time></div>\n        </div>`}else t+="没有评论";let n=document.querySelector("#card-newest-comments .aside-list");n&&(n.innerHTML=t),window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("twikoo-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{twikoo.getRecentComments({envId:"https://twikoo.baskly.fun",region:"",pageSize:6,includeReply:!0}).then((function(t){const n=t.map((e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()};var t}));saveToLocal.set("twikoo-newest-comments",JSON.stringify(n),10/1440),e(n)})).catch((function(e){document.querySelector("#card-newest-comments .aside-list").textContent="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof twikoo?t():getScript("https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js").then(t)})()}};t(),document.addEventListener("pjax:complete",t)}))</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail="yang@li.com"</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script async src="//at.alicdn.com/t/c/font_4782341_g014uvnbwk6.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.9.0-rc.1/echarts.min.js"></script><script src="https://lib.baomitu.com/echarts/4.9.0-rc.1/echarts.min.js"></script><script src="https://jsd-proxy.ygxz.in/gh/lyay23/blogstatic@v1.0.0/static/imgloaded.min.js"></script><script src="https://jsd-proxy.ygxz.in/gh/lyay23/blogstatic@v1.0.0/static/countdown.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors=['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:type"]','meta[property="og:site_name"]','meta[property="og:description"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/music/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(anzhiyu.removeGlobalFnEvent("pjax"),anzhiyu.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>